(function(e,t){"use strict";function n(e){d&&e.get("$route")}function r(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,a,o,l,s){function u(){g&&(r.cancel(g),g=null);d&&(d.$destroy(),d=null);f&&(g=r.leave(f),g.done(function(e){!1!==e&&(g=null)}),f=null)}function c(){var o=e.current&&e.current.locals;if(t.isDefined(o&&o.$template)){var o=i.$new(),l=e.current;f=s(o,function(e){r.enter(e,null,f||a).done(function(e){!1===e||!t.isDefined(p)||p&&!i.$eval(p)||n()});u()});d=l.scope=o;d.$emit("$viewContentLoaded");d.$eval(m)}else u()}var d,f,g,p=o.autoscroll,m=o.onload||"";i.$on("$routeChangeSuccess",c);c()}}}function i(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var a=n.current,o=a.locals;i.html(o.$template);var l=e(i.contents());if(a.controller){o.$scope=r;var s=t(a.controller,o);a.controllerAs&&(r[a.controllerAs]=s);i.data("$ngControllerController",s);i.children().data("$ngControllerController",s)}r[a.resolveAs||"$resolve"]=o;l(r)}}}var a,o,l,s,u=t.module("ngRoute",[]).info({angularVersion:"1.6.4"}).provider("$route",function(){function e(e,n){return t.extend(Object.create(e),n)}function n(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,n,r){e="?"===r||"*?"===r?"?":null;r="*"===r||"*?"===r?"*":null;i.push({name:n,optional:!!e});t=t||"";return""+(e?"":t)+"(?:"+(e?t:"")+(r&&"(.+?)"||"([^/]+)")+(e||"")+")"+(e||"")}).replace(/([/$*])/g,"\\$1");r.regexp=new RegExp("^"+e+"$",n?"i":"");return r}a=t.isArray;o=t.isObject;l=t.isDefined;s=t.noop;var r={};this.when=function(e,i){var l;l=void 0;if(a(i)){l=l||[];for(var s=0,u=i.length;s<u;s++)l[s]=i[s]}else if(o(i))for(s in l=l||{},i)if("$"!==s.charAt(0)||"$"!==s.charAt(1))l[s]=i[s];l=l||i;t.isUndefined(l.reloadOnSearch)&&(l.reloadOnSearch=!0);t.isUndefined(l.caseInsensitiveMatch)&&(l.caseInsensitiveMatch=this.caseInsensitiveMatch);r[e]=t.extend(l,e&&n(e,l));e&&(s="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/",r[s]=t.extend({redirectTo:e},n(s,l)));return this};this.caseInsensitiveMatch=!1;this.otherwise=function(e){"string"===typeof e&&(e={redirectTo:e});this.when(null,e);return this};d=!0;this.eagerInstantiationEnabled=function(e){return l(e)?(d=e,this):d};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(n,i,a,o,l,u,d,f){function g(e){var r=x.current;(D=(w=b())&&r&&w.$$route===r.$$route&&t.equals(w.pathParams,r.pathParams)&&!w.reloadOnSearch&&!C)||!r&&!w||n.$broadcast("$routeChangeStart",w,r).defaultPrevented&&e&&e.preventDefault()}function p(){var e=x.current,r=w;if(D)e.params=r.params,t.copy(e.params,a),n.$broadcast("$routeUpdate",e);else if(r||e){C=!1;x.current=r;var i=o.resolve(r);f.$$incOutstandingRequestCount();i.then(m).then(h).then(function(o){return o&&i.then(v).then(function(i){r===x.current&&(r&&(r.locals=i,t.copy(r.params,a)),n.$broadcast("$routeChangeSuccess",r,e))})}).catch(function(t){r===x.current&&n.$broadcast("$routeChangeError",r,e,t)}).finally(function(){f.$$completeOutstandingRequest(s)})}}function m(e){var n={route:e,hasRedirection:!1};if(e)if(e.redirectTo)if(t.isString(e.redirectTo))n.path=$(e.redirectTo,e.params),n.search=e.params,n.hasRedirection=!0;else{var r=i.path(),a=i.search();e=e.redirectTo(e.pathParams,r,a);t.isDefined(e)&&(n.url=e,n.hasRedirection=!0)}else if(e.resolveRedirectTo)return o.resolve(l.invoke(e.resolveRedirectTo)).then(function(e){t.isDefined(e)&&(n.url=e,n.hasRedirection=!0);return n});return n}function h(e){var t=!0;if(e.route!==x.current)t=!1;else if(e.hasRedirection){var n=i.url(),r=e.url;r?i.url(r).replace():r=i.path(e.path).search(e.search).replace().url();r!==n&&(t=!1)}return t}function v(e){if(e){var n=t.extend({},e.resolve);t.forEach(n,function(e,r){n[r]=t.isString(e)?l.get(e):l.invoke(e,null,null,r)});e=y(e);t.isDefined(e)&&(n.$template=e);return o.all(n)}}function y(e){var n,r;t.isDefined(n=e.template)?t.isFunction(n)&&(n=n(e.params)):t.isDefined(r=e.templateUrl)&&(t.isFunction(r)&&(r=r(e.params)),t.isDefined(r)&&(e.loadedTemplateUrl=d.valueOf(r),n=u(r)));return n}function b(){var n,a;t.forEach(r,function(r,o){var l;if(l=!a){var s=i.path();l=r.keys;var u={};if(r.regexp)if(s=r.regexp.exec(s)){for(var c=1,d=s.length;c<d;++c){var f=l[c-1],g=s[c];f&&g&&(u[f.name]=g)}l=u}else l=null;else l=null;l=n=l}l&&(a=e(r,{params:t.extend({},i.search(),n),pathParams:n}),a.$$route=r)});return a||r[null]&&e(r[null],{params:{},pathParams:{}})}function $(e,n){var r=[];t.forEach((e||"").split(":"),function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),a=i[1];r.push(n[a]);r.push(i[2]||"");delete n[a]}});return r.join("")}var C=!1,w,D,x={routes:r,reload:function(){C=!0;var e={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0;C=!1}};n.$evalAsync(function(){g(e);e.defaultPrevented||p()})},updateParams:function(e){if(this.current&&this.current.$$route)e=t.extend({},this.current.params,e),i.path($(this.current.$$route.originalPath,e)),i.search(e);else throw c("norout")}};n.$on("$locationChangeStart",g);n.$on("$locationChangeSuccess",p);return x}]}).run(n),c=t.$$minErr("ngRoute"),d;n.$inject=["$injector"];u.provider("$routeParams",function(){this.$get=function(){return{}}});u.directive("ngView",r);u.directive("ngView",i);r.$inject=["$route","$anchorScroll","$animate"];i.$inject=["$compile","$controller","$route"]})(window,window.angular);(function(e,t){"use strict";function n(e,t,n){if(!e)throw _("areq",t||"?",n||"required");return e}function r(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;V(e)&&(e=e.join(" "));V(t)&&(t=t.join(" "));return e+" "+t}function i(e){var t={};e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from);return t}function a(e,t,n){var r="";e=V(e)?e:e&&Y(e)&&e.length?e.split(/\s+/):[];B(e,function(e,i){e&&0<e.length&&(r+=0<i?" ":"",r+=n?t+e:e+t)});return r}function o(e){if(e instanceof X)switch(e.length){case 0:return e;case 1:if(1===e[0].nodeType)return e;break;default:return X(l(e))}if(1===e.nodeType)return X(e)}function l(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(1===n.nodeType)return n}}function s(e,t,n){B(t,function(t){e.addClass(t,n)})}function u(e,t,n){B(t,function(t){e.removeClass(t,n)})}function c(e){return function(t,n){n.addClass&&(s(e,t,n.addClass),n.addClass=null);n.removeClass&&(u(e,t,n.removeClass),n.removeClass=null)}}function d(e){e=e||{};if(!e.$$prepared){var t=e.domOperation||J;e.domOperation=function(){e.$$domOperationFired=!0;t();t=J};e.$$prepared=!0}return e}function f(e,t){g(e,t);p(e,t)}function g(e,t){t.from&&(e.css(t.from),t.from=null)}function p(e,t){t.to&&(e.css(t.to),t.to=null)}function m(e,t,n){var r=t.options||{};n=n.options||{};var i=(r.addClass||"")+" "+(n.addClass||""),a=(r.removeClass||"")+" "+(n.removeClass||"");e=h(e.attr("class"),i,a);n.preparationClasses&&(r.preparationClasses=w(n.preparationClasses,r.preparationClasses),delete n.preparationClasses);i=r.domOperation!==J?r.domOperation:null;M(r,n);i&&(r.domOperation=i);r.addClass=e.addClass?e.addClass:null;r.removeClass=e.removeClass?e.removeClass:null;t.addClass=r.addClass;t.removeClass=r.removeClass;return r}function h(e,t,n){function r(e){Y(e)&&(e=e.split(" "));var t={};B(e,function(e){e.length&&(t[e]=!0)});return t}var i={};e=r(e);t=r(t);B(t,function(e,t){i[t]=1});n=r(n);B(n,function(e,t){i[t]=1===i[t]?null:-1});var a={addClass:"",removeClass:""};B(i,function(t,n){var r,i;1===t?(r="addClass",i=!e[n]||e[n+"-remove"]):-1===t&&(r="removeClass",i=e[n]||e[n+"-add"]);i&&(a[r].length&&(a[r]+=" "),a[r]+=n)});return a}function v(e){return e instanceof X?e[0]:e}function y(e,t,n){var r="";t&&(r=a(t,"ng-",!0));n.addClass&&(r=w(r,a(n.addClass,"-add")));n.removeClass&&(r=w(r,a(n.removeClass,"-remove")));r.length&&(n.preparationClasses=r,e.addClass(r))}function b(e,t){var n=t?"-"+t+"s":"";C(e,[R,n]);return[R,n]}function $(e,t){var n=t?"paused":"",r=z+"PlayState";C(e,[r,n]);return[r,n]}function C(e,t){e.style[t[0]]=t[1]}function w(e,t){return e?t?e+" "+t:e:t}function D(e,t,n){var r=Object.create(null),i=e.getComputedStyle(t)||{};B(n,function(e,t){var n=i[e];if(n){var a=n.charAt(0);if("-"===a||"+"===a||0<=a)n=x(n);0===n&&(n=null);r[t]=n}});return r}function x(e){var t=0;e=e.split(/\s*,\s*/);B(e,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1));e=parseFloat(e)||0;t=t?Math.max(e,t):e});return t}function k(e){return 0===e||null!=e}function S(e,t){var n=F,r=e+"s";t?n+="Duration":r+=" linear all";return[n,r]}function A(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){return(t=e[t])?t.total:0},get:function(t){return(t=e[t])&&t.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function E(e,t,n){B(n,function(n){e[n]=q(e[n])?e[n]:t.style.getPropertyValue(n)})}var F,P,z,O;void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(F="WebkitTransition",P="webkitTransitionEnd transitionend"):(F="transition",P="transitionend");void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(z="WebkitAnimation",O="webkitAnimationEnd animationend"):(z="animation",O="animationend");var U=z+"Delay",T=z+"Duration",R=F+"Delay",I=F+"Duration",_=t.$$minErr("ng"),j={transitionDuration:I,transitionDelay:R,transitionProperty:F+"Property",animationDuration:T,animationDelay:U,animationIterationCount:z+"IterationCount"},N={transitionDuration:I,transitionDelay:R,animationDuration:T,animationDelay:U},L,M,B,V,q,W,H,G,Y,K,X,J;t.module("ngAnimate",[],function(){J=t.noop;L=t.copy;M=t.extend;X=t.element;B=t.forEach;V=t.isArray;Y=t.isString;G=t.isObject;K=t.isUndefined;q=t.isDefined;H=t.isFunction;W=t.isElement}).info({angularVersion:"1.6.4"}).directive("ngAnimateSwap",["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,n,r,i,a){var o,l;t.$watchCollection(r.ngAnimateSwap||r["for"],function(r){o&&e.leave(o);l&&(l.$destroy(),l=null);if(r||0===r)l=t.$new(),a(l,function(t){o=t;e.enter(t,null,n)})})}}}]).directive("ngAnimateChildren",["$interpolate",function(e){return{link:function(t,n,r){function i(e){n.data("$$ngAnimateChildren","on"===e||"true"===e)}var a=r.ngAnimateChildren;Y(a)&&0===a.length?n.data("$$ngAnimateChildren",!0):(i(e(a)(t)),r.$observe("ngAnimateChildren",i))}}}]).factory("$$rAFScheduler",["$$rAF",function(e){function t(e){r=r.concat(e);n()}function n(){if(r.length){for(var t=r.shift(),a=0;a<t.length;a++)t[a]();i||e(function(){i||n()})}}var r,i;r=t.queue=[];t.waitUntilQuiet=function(t){i&&i();i=e(function(){i=null;t();n()})};return t}]).provider("$$animateQueue",["$animateProvider",function(t){function r(e){if(!e)return null;e=e.split(" ");var t=Object.create(null);B(e,function(e){t[e]=!0});return t}function i(e,t){if(e&&t){var n=r(t);return e.split(" ").some(function(e){return n[e]})}}function a(e,t,n){return u[e].some(function(e){return e(t,n)})}function s(e,t){var n=0<(e.addClass||"").length,r=0<(e.removeClass||"").length;return t?n&&r:n||r}var u=this.rules={skip:[],cancel:[],join:[]};u.join.push(function(e,t){return!e.structural&&s(e)});u.skip.push(function(e,t){return!e.structural&&!s(e)});u.skip.push(function(e,t){return"leave"===t.event&&e.structural});u.skip.push(function(e,t){return t.structural&&2===t.state&&!e.structural});u.cancel.push(function(e,t){return t.structural&&e.structural});u.cancel.push(function(e,t){return 2===t.state&&e.structural});u.cancel.push(function(e,t){if(t.structural)return!1;var n=e.addClass,r=e.removeClass,a=t.addClass,o=t.removeClass;return K(n)&&K(r)||K(a)&&K(o)?!1:i(n,o)||i(r,a)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(r,i,u,g,p,h,b,$,C,w,D){function x(){var e=!1;return function(t){e?t():i.$$postDigest(function(){e=!0;t()})}}function k(e,t,n){var r=[],i=I[n];i&&B(i,function(i){H.call(i.node,t)?r.push(i.callback):"leave"===n&&H.call(i.node,e)&&r.push(i.callback)});return r}function S(e,t,n){var r=l(t);return e.filter(function(e){return!(e.node===r&&(!n||e.callback===n))})}function A(e,t,n){function l(e,t,n,i){w(function(){var e=k($,p,t);e.length?r(function(){B(e,function(e){e(g,n,i)});"close"!==n||p.parentNode||J.off(p)}):"close"!==n||p.parentNode||J.off(p)});e.progress(t,n,i)}function u(e){var t=g,n=c;n.preparationClasses&&(t.removeClass(n.preparationClasses),n.preparationClasses=null);n.activeClasses&&(t.removeClass(n.activeClasses),n.activeClasses=null);N(g,c);f(g,c);c.domOperation();C.complete(!e)}var c=L(n),g=o(e),p=v(g),$=p&&p.parentNode,c=d(c),C=new b,w=x();V(c.addClass)&&(c.addClass=c.addClass.join(" "));c.addClass&&!Y(c.addClass)&&(c.addClass=null);V(c.removeClass)&&(c.removeClass=c.removeClass.join(" "));c.removeClass&&!Y(c.removeClass)&&(c.removeClass=null);c.from&&!G(c.from)&&(c.from=null);c.to&&!G(c.to)&&(c.to=null);if(!p)return u(),C;n=[p.getAttribute("class"),c.addClass,c.removeClass].join(" ");if(!j(n))return u(),C;var S=0<=["enter","move","leave"].indexOf(t),A=D(),R=!T||A||U.get(p);n=!R&&O.get(p)||{};var I=!!n.state;R||I&&1===n.state||(R=!P(p,$,t));if(R)return A&&l(C,t,"start"),u(),A&&l(C,t,"close"),C;S&&E(p);A={structural:S,element:g,event:t,addClass:c.addClass,removeClass:c.removeClass,close:u,options:c,runner:C};if(I){if(a("skip",A,n)){if(2===n.state)return u(),C;m(g,n,A);return n.runner}if(a("cancel",A,n))if(2===n.state)n.runner.end();else if(n.structural)n.close();else return m(g,n,A),n.runner;else if(a("join",A,n))if(2===n.state)m(g,A,{});else return y(g,S?t:null,c),t=A.event=n.event,c=m(g,n,A),n.runner}else m(g,A,{});(I=A.structural)||(I="animate"===A.event&&0<Object.keys(A.options.to||{}).length||s(A));if(!I)return u(),F(p),C;var _=(n.counter||0)+1;A.counter=_;z(p,1,A);i.$$postDigest(function(){g=o(e);var n=O.get(p),r=!n,n=n||{},i=0<(g.parent()||[]).length&&("animate"===n.event||n.structural||s(n));if(r||n.counter!==_||!i){r&&(N(g,c),f(g,c));if(r||S&&n.event!==t)c.domOperation(),C.end();i||F(p)}else t=!n.structural&&s(n,!0)?"setClass":n.event,z(p,2),n=h(g,t,n.options),C.setHost(n),l(C,t,"start",{}),n.done(function(e){u(!e);(e=O.get(p))&&e.counter===_&&F(p);l(C,t,"close",{})})});return C}function E(e){e=e.querySelectorAll("[data-ng-animate]");B(e,function(e){var t=parseInt(e.getAttribute("data-ng-animate"),10),n=O.get(e);if(n)switch(t){case 2:n.runner.end();case 1:O.delete(e)}})}function F(e){e.removeAttribute("data-ng-animate");O.delete(e)}function P(e,t,n){n=g[0].body;var r=v(u),i=e===n||"HTML"===e.nodeName,a=e===r,o=!1,l=U.get(e),s;for((e=X.data(e,"$ngAnimatePin"))&&(t=v(e));t;){a||(a=t===r);if(1!==t.nodeType)break;e=O.get(t)||{};if(!o){var c=U.get(t);if(!0===c&&!1!==l){l=!0;break}else!1===c&&(l=!1);o=e.structural}if(K(s)||!0===s)e=X.data(t,"$$ngAnimateChildren"),q(e)&&(s=e);if(o&&!1===s)break;i||(i=t===n);if(i&&a)break;if(!a&&(e=X.data(t,"$ngAnimatePin"))){t=v(e);continue}t=t.parentNode}return(!o||s)&&!0!==l&&a&&i}function z(e,t,n){n=n||{};n.state=t;e.setAttribute("data-ng-animate",t);n=(t=O.get(e))?M(t,n):n;O.set(e,n)}var O=new p,U=new p,T=null,R=i.$watch(function(){return 0===$.totalPendingRequests},function(e){e&&(R(),i.$$postDigest(function(){i.$$postDigest(function(){null===T&&(T=!0)})}))}),I=Object.create(null),_=t.classNameFilter(),j=_?function(e){return _.test(e)}:function(){return!0},N=c(C),H=e.Node.prototype.contains||function(e){return this===e||!!(this.compareDocumentPosition(e)&16)},J={on:function(e,t,n){var r=l(t);I[e]=I[e]||[];I[e].push({node:r,callback:n});X(t).on("$destroy",function(){O.get(r)||J.off(e,t,n)})},off:function(e,t,n){if(1!==arguments.length||Y(arguments[0])){var r=I[e];r&&(I[e]=1===arguments.length?null:S(r,t,n))}else for(r in t=arguments[0],I)I[r]=S(I[r],t)},pin:function(e,t){n(W(e),"element","not an element");n(W(t),"parentElement","not an element");e.data("$ngAnimatePin",t)},push:function(e,t,n,r){n=n||{};n.domOperation=r;return A(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!T;else if(W(e)){var r=v(e);1===n?t=!U.get(r):U.set(r,!t)}else t=T=!!e;return t}};return J}]}]).provider("$$animation",["$animateProvider",function(e){var t=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,n,i,a,o,l){function s(e){function t(e){if(e.processed)return e;e.processed=!0;var r=e.domNode,a=r.parentNode;i.set(r,e);for(var o;a;){if(o=i.get(a)){o.processed||(o=t(o));break}a=a.parentNode}(o||n).children.push(e);return e}var n={children:[]},r,i=new o;for(r=0;r<e.length;r++){var a=e[r];i.set(a.domNode,e[r]={domNode:a.domNode,fn:a.fn,children:[]})}for(r=0;r<e.length;r++)t(e[r]);return function(e){var t=[],n=[],r;for(r=0;r<e.children.length;r++)n.push(e.children[r]);e=n.length;var i=0,a=[];for(r=0;r<n.length;r++){var o=n[r];0>=e&&(e=i,i=0,t.push(a),a=[]);a.push(o.fn);o.children.forEach(function(e){i++;n.push(e)});e--}a.length&&t.push(a);return t}(n)}var u=[],g=c(e);return function(o,c,p){function m(e){e=e.hasAttribute("ng-animate-ref")?[e]:e.querySelectorAll("[ng-animate-ref]");var t=[];B(e,function(e){var n=e.getAttribute("ng-animate-ref");n&&n.length&&t.push(e)});return t}function h(e){var t=[],n={};B(e,function(e,r){var i=v(e.element),a=0<=["enter","move"].indexOf(e.event),i=e.structural?m(i):[];if(i.length){var o=a?"to":"from";B(i,function(e){var t=e.getAttribute("ng-animate-ref");n[t]=n[t]||{};n[t][o]={animationID:r,element:X(e)}})}else t.push(e)});var r={},i={};B(n,function(n,a){var o=n.from,l=n.to;if(o&&l){var s=e[o.animationID],u=e[l.animationID],c=o.animationID.toString();if(!i[c]){var d=i[c]={structural:!0,beforeStart:function(){s.beforeStart();u.beforeStart()},close:function(){s.close();u.close()},classes:y(s.classes,u.classes),from:s,to:u,anchors:[]};d.classes.length?t.push(d):(t.push(s),t.push(u))}i[c].anchors.push({out:o.element,in:l.element})}else o=o?o.animationID:l.animationID,l=o.toString(),r[l]||(r[l]=!0,t.push(e[o]))});return t}function y(e,t){e=e.split(" ");t=t.split(" ");for(var n=[],r=0;r<e.length;r++){var i=e[r];if("ng-"!==i.substring(0,3))for(var a=0;a<t.length;a++)if(i===t[a]){n.push(i);break}}return n.join(" ")}function b(e){for(var n=t.length-1;0<=n;n--){var r=i.get(t[n])(e);if(r)return r}}function $(e,t){function n(e){(e=e.data("$$animationRunner"))&&e.setHost(t)}e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element)}function C(){var e=o.data("$$animationRunner");!e||"leave"===c&&p.$$domOperationFired||e.end()}function w(t){o.off("$destroy",C);o.removeData("$$animationRunner");g(o,p);f(o,p);p.domOperation();S&&e.removeClass(o,S);o.removeClass("ng-animate");x.complete(!t)}p=d(p);var D=0<=["enter","move","leave"].indexOf(c),x=new a({end:function(){w()},cancel:function(){w(!0)}});if(!t.length)return w(),x;o.data("$$animationRunner",x);var k=r(o.attr("class"),r(p.addClass,p.removeClass)),S=p.tempClasses;S&&(k+=" "+S,p.tempClasses=null);var A;D&&(A="ng-"+c+"-prepare",e.addClass(o,A));u.push({element:o,classes:k,event:c,structural:D,options:p,beforeStart:function(){o.addClass("ng-animate");S&&e.addClass(o,S);A&&(e.removeClass(o,A),A=null)},close:w});o.on("$destroy",C);if(1<u.length)return x;n.$$postDigest(function(){var e=[];B(u,function(t){t.element.data("$$animationRunner")?e.push(t):t.close()});u.length=0;var t=h(e),n=[];B(t,function(e){n.push({domNode:v(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close;if((e.anchors?e.from.element||e.to.element:e.element).data("$$animationRunner")){var r=b(e);r&&(t=r.start)}t?(t=t(),t.done(function(e){n(!e)}),$(e,t)):n()}})});l(s(n))});return x}}]}]).provider("$animateCss",["$animateProvider",function(e){var t=A(),n=A();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,r,o,l,s,u,m,h){function y(e,t){var n=e.parentNode;return(n.$$ngAnimateParentKey||(n.$$ngAnimateParentKey=++_))+"-"+e.getAttribute("class")+"-"+t}function w(i,o,l,s){var u;0<t.count(l)&&(u=n.get(l),u||(o=a(o,"-stagger"),r.addClass(i,o),u=D(e,i,s),u.animationDuration=Math.max(u.animationDuration,0),u.transitionDuration=Math.max(u.transitionDuration,0),r.removeClass(i,o),n.put(l,u)));return u||{}}function x(e){M.push(e);m.waitUntilQuiet(function(){t.flush();n.flush();for(var e=s(),r=0;r<M.length;r++)M[r](e);M.length=0})}function A(n,r,i){r=t.get(i);r||(r=D(e,n,j),"infinite"===r.animationIterationCount&&(r.animationIterationCount=1));t.put(i,r);n=r;i=n.animationDelay;r=n.transitionDelay;n.maxDelay=i&&r?Math.max(i,r):i||r;n.maxDuration=Math.max(n.animationDuration*n.animationIterationCount,n.transitionDuration);return n}var I=c(r),_=0,M=[];return function(e,n){function s(){m()}function c(){m(!0)}function m(t){if(!(X||Z&&Q)){X=!0;Q=!1;q.$$skipPreparationClasses||r.removeClass(e,de);r.removeClass(e,ge);$(H,!1);b(H,!1);B(G,function(e){H.style[e[0]]=""});I(e,q);f(e,q);Object.keys(W).length&&B(W,function(e,t){e?H.style.setProperty(t,e):H.style.removeProperty(t)});if(q.onDone)q.onDone();le&&le.length&&e.off(le.join(" "),j);var n=e.data("$$animateCss");n&&(l.cancel(n[0].timer),e.removeData("$$animateCss"));ee&&ee.complete(!t)}}function D(e){be.blockTransition&&b(H,e);be.blockKeyframeAnimation&&$(H,!!e)}function _(){ee=new o({end:s,cancel:c});x(J);m();return{$$willAnimate:!1,start:function(){return ee},end:s}}function j(e){e.stopPropagation();var t=e.originalEvent||e;e=t.$manualTimeStamp||Date.now();t=parseFloat(t.elapsedTime.toFixed(3));Math.max(e-oe,0)>=re&&t>=ie&&(Z=!0,m())}function M(){function t(){if(!X){D(!1);B(G,function(e){H.style[e[0]]=e[1]});I(e,q);r.addClass(e,ge);if(be.recalculateTimingStyles){fe=H.getAttribute("class")+" "+de;pe=y(H,fe);ve=A(H,fe,pe);ye=ve.maxDelay;ne=Math.max(ye,0);ie=ve.maxDuration;if(0===ie){m();return}be.hasTransitions=0<ve.transitionDuration;be.hasAnimations=0<ve.animationDuration}be.applyAnimationDelay&&(ye="boolean"!==typeof q.delay&&k(q.delay)?parseFloat(q.delay):ye,ne=Math.max(ye,0),ve.animationDelay=ye,$e=[U,ye+"s"],G.push($e),H.style[$e[0]]=$e[1]);re=1e3*ne;ae=1e3*ie;if(q.easing){var t,i=q.easing;be.hasTransitions&&(t=F+"TimingFunction",G.push([t,i]),H.style[t]=i);be.hasAnimations&&(t=z+"TimingFunction",G.push([t,i]),H.style[t]=i)}ve.transitionDuration&&le.push(P);ve.animationDuration&&le.push(O);oe=Date.now();var a=re+1.5*ae;t=oe+a;var i=e.data("$$animateCss")||[],o=!0;if(i.length){var s=i[0];(o=t>s.expectedEndTime)?l.cancel(s.timer):i.push(m)}o&&(a=l(n,a,!1),i[0]={timer:a,expectedEndTime:t},i.push(m),e.data("$$animateCss",i));if(le.length)e.on(le.join(" "),j);q.to&&(q.cleanupStyles&&E(W,H,Object.keys(q.to)),p(e,q))}}function n(){var t=e.data("$$animateCss");if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData("$$animateCss")}}if(!X)if(H.parentNode){var i=function(e){if(Z)Q&&e&&(Q=!1,m());else if(Q=!e,ve.animationDuration)if(e=$(H,Q),Q)G.push(e);else{var t=G,n=t.indexOf(e);0<=e&&t.splice(n,1)}},a=0<he&&(ve.transitionDuration&&0===me.transitionDuration||ve.animationDuration&&0===me.animationDuration)&&Math.max(me.animationDelay,me.transitionDelay);a?l(t,Math.floor(a*he*1e3),!1):t();te.resume=function(){i(!0)};te.pause=function(){i(!1)}}else m()}var q=n||{};q.$$prepared||(q=d(L(q)));var W={},H=v(e);if(!H||!H.parentNode||!h.enabled())return _();var G=[],Y=e.attr("class"),K=i(q),X,Q,Z,ee,te,ne,re,ie,ae,oe,le=[];if(0===q.duration||!u.animations&&!u.transitions)return _();var se=q.event&&V(q.event)?q.event.join(" "):q.event,ue="",ce="";se&&q.structural?ue=a(se,"ng-",!0):se&&(ue=se);q.addClass&&(ce+=a(q.addClass,"-add"));q.removeClass&&(ce.length&&(ce+=" "),ce+=a(q.removeClass,"-remove"));q.applyClassesEarly&&ce.length&&I(e,q);var de=[ue,ce].join(" ").trim(),fe=Y+" "+de,ge=a(de,"-active"),Y=K.to&&0<Object.keys(K.to).length;if(!(0<(q.keyframeStyle||"").length||Y||de))return _();var pe,me;0<q.stagger?(K=parseFloat(q.stagger),me={transitionDelay:K,animationDelay:K,transitionDuration:0,animationDuration:0}):(pe=y(H,fe),me=w(H,de,pe,N));q.$$skipPreparationClasses||r.addClass(e,de);q.transitionStyle&&(K=[F,q.transitionStyle],C(H,K),G.push(K));0<=q.duration&&(K=0<H.style[F].length,K=S(q.duration,K),C(H,K),G.push(K));q.keyframeStyle&&(K=[z,q.keyframeStyle],C(H,K),G.push(K));var he=me?0<=q.staggerIndex?q.staggerIndex:t.count(pe):0;(se=0===he)&&!q.skipBlocking&&b(H,9999);var ve=A(H,fe,pe),ye=ve.maxDelay;ne=Math.max(ye,0);ie=ve.maxDuration;var be={};be.hasTransitions=0<ve.transitionDuration;be.hasAnimations=0<ve.animationDuration;be.hasTransitionAll=be.hasTransitions&&"all"===ve.transitionProperty;be.applyTransitionDuration=Y&&(be.hasTransitions&&!be.hasTransitionAll||be.hasAnimations&&!be.hasTransitions);be.applyAnimationDuration=q.duration&&be.hasAnimations;be.applyTransitionDelay=k(q.delay)&&(be.applyTransitionDuration||be.hasTransitions);be.applyAnimationDelay=k(q.delay)&&be.hasAnimations;be.recalculateTimingStyles=0<ce.length;if(be.applyTransitionDuration||be.applyAnimationDuration)ie=q.duration?parseFloat(q.duration):ie,be.applyTransitionDuration&&(be.hasTransitions=!0,ve.transitionDuration=ie,K=0<H.style[F+"Property"].length,G.push(S(ie,K))),be.applyAnimationDuration&&(be.hasAnimations=!0,ve.animationDuration=ie,G.push([T,ie+"s"]));if(0===ie&&!be.recalculateTimingStyles)return _();if(null!=q.delay){var $e;"boolean"!==typeof q.delay&&($e=parseFloat(q.delay),ne=Math.max($e,0));be.applyTransitionDelay&&G.push([R,$e+"s"]);be.applyAnimationDelay&&G.push([U,$e+"s"])}null==q.duration&&0<ve.transitionDuration&&(be.recalculateTimingStyles=be.recalculateTimingStyles||se);re=1e3*ne;ae=1e3*ie;q.skipBlocking||(be.blockTransition=0<ve.transitionDuration,be.blockKeyframeAnimation=0<ve.animationDuration&&0<me.animationDelay&&0===me.animationDuration);q.from&&(q.cleanupStyles&&E(W,H,Object.keys(q.from)),g(e,q));be.blockTransition||be.blockKeyframeAnimation?D(ie):q.skipBlocking||b(H,!1);return{$$willAnimate:!0,end:s,start:function(){if(!X)return te={end:s,cancel:c,resume:null,pause:null},ee=new o(te),x(M),ee}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,t,n,r,i,a,o){function l(e){return e.replace(/\bng-\S+\b/g,"")}function s(e,t){Y(e)&&(e=e.split(" "));Y(t)&&(t=t.split(" "));return e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function u(t,r,i){function a(e){var t={},n=v(e).getBoundingClientRect();B(["width","height","top","left"],function(e){var r=n[e];switch(e){case"top":r+=f.scrollTop;break;case"left":r+=f.scrollLeft}t[e]=Math.floor(r)+"px"});return t}function o(){var t=l(i.attr("class")||""),n=s(t,d),t=s(d,t),n=e(c,{to:a(i),addClass:"ng-anchor-in "+n,removeClass:"ng-anchor-out "+t,delay:!0});return n.$$willAnimate?n:null}function u(){c.remove();r.removeClass("ng-animate-shim");i.removeClass("ng-animate-shim")}var c=X(v(r).cloneNode(!0)),d=l(c.attr("class")||"");r.addClass("ng-animate-shim");i.addClass("ng-animate-shim");c.addClass("ng-anchor");g.append(c);var p;t=function(){var t=e(c,{addClass:"ng-anchor-out",delay:!0,from:a(r)});return t.$$willAnimate?t:null}();if(!t&&(p=o(),!p))return u();var m=t||p;return{start:function(){function e(){r&&r.end()}var t,r=m.start();r.done(function(){r=null;if(!p&&(p=o()))return r=p.start(),r.done(function(){r=null;u();t.complete()}),r;u();t.complete()});return t=new n({end:e,cancel:e})}}}function c(e,t,r,i){var a=d(e,J),o=d(t,J),l=[];B(i,function(e){(e=u(r,e.out,e["in"]))&&l.push(e)});if(a||o||0!==l.length)return{start:function(){function e(){B(t,function(e){e.end()})}var t=[];a&&t.push(a.start());o&&t.push(o.start());B(l,function(e){t.push(e.start())});var r=new n({end:e,cancel:e});n.all(t,function(e){r.complete(e)});return r}}}function d(t){var n=t.element,r=t.options||{};t.structural&&(r.event=t.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===t.event&&(r.onDone=r.domOperation));r.preparationClasses&&(r.event=w(r.event,r.preparationClasses));t=e(n,r);return t.$$willAnimate?t:null}if(!i.animations&&!i.transitions)return J;var f=o[0].body;t=v(r);var g=X(t.parentNode&&11===t.parentNode.nodeType||f.contains(t)?t:f);return function(e){return e.from&&e.to?c(e.from,e.to,e.classes,e.anchors):d(e)}}]}]).provider("$$animateJs",["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,r){function i(n){n=V(n)?n:n.split(" ");for(var r=[],i={},a=0;a<n.length;a++){var o=n[a],l=e.$$registeredAnimations[o];l&&!i[o]&&(r.push(t.get(l)),i[o]=!0)}return r}var a=c(r);return function(e,t,r,o){function l(){o.domOperation();a(e,o)}function s(e,t,r,i,a){switch(r){case"animate":t=[t,i.from,i.to,a];break;case"setClass":t=[t,p,m,a];break;case"addClass":t=[t,p,a];break;case"removeClass":t=[t,m,a];break;default:t=[t,a]}t.push(i);if(e=e.apply(e,t))if(H(e.start)&&(e=e.start()),e instanceof n)e.done(a);else if(H(e))return e;return J}function u(e,t,r,i,a){var o=[];B(i,function(i){var l=i[a];l&&o.push(function(){var i,a,o=!1,u=function(e){o||(o=!0,(a||J)(e),i.complete(!e))};i=new n({end:function(){u()},cancel:function(){u(!0)}});a=s(l,e,t,r,function(e){u(!1===e)});return i})});return o}function c(e,t,r,i,a){var o=u(e,t,r,i,a);if(0===o.length){var l,s;"beforeSetClass"===a?(l=u(e,"removeClass",r,i,"beforeRemoveClass"),s=u(e,"addClass",r,i,"beforeAddClass")):"setClass"===a&&(l=u(e,"removeClass",r,i,"removeClass"),s=u(e,"addClass",r,i,"addClass"));l&&(o=o.concat(l));s&&(o=o.concat(s))}if(0!==o.length)return function(e){var t=[];o.length&&B(o,function(e){t.push(e())});t.length?n.all(t,e):e();return function(e){B(t,function(t){e?t.cancel():t.end()})}}}var g=!1;3===arguments.length&&G(r)&&(o=r,r=null);o=d(o);r||(r=e.attr("class")||"",o.addClass&&(r+=" "+o.addClass),o.removeClass&&(r+=" "+o.removeClass));var p=o.addClass,m=o.removeClass,h=i(r),v,y;if(h.length){var b,$;"leave"===t?($="leave",b="afterLeave"):($="before"+t.charAt(0).toUpperCase()+t.substr(1),b=t);"enter"!==t&&"move"!==t&&(v=c(e,t,o,h,$));y=c(e,t,o,h,b)}if(v||y){var C;return{$$willAnimate:!0,end:function(){C?C.end():(g=!0,l(),f(e,o),C=new n,C.complete(!0));return C},start:function(){function t(t){g=!0;l();f(e,o);C.complete(t)}if(C)return C;C=new n;var r,i=[];v&&i.push(function(e){r=v(e)});i.length?i.push(function(e){l();e(!0)}):l();y&&i.push(function(e){r=y(e)});C.setHost({end:function(){g||((r||J)(void 0),t(void 0))},cancel:function(){g||((r||J)(!0),t(!0))}});n.chain(i,t);return C}}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function n(t){return e(t.element,t.event,t.classes,t.options)}return function(e){if(e.from&&e.to){var r=n(e.from),i=n(e.to);if(r||i)return{start:function(){function e(){return function(){B(n,function(e){e.end()})}}var n=[];r&&n.push(r.start());i&&n.push(i.start());t.all(n,function(e){a.complete(e)});var a=new t({end:e(),cancel:e()});return a}}}else return n(e)}}]}])})(window,window.angular);(function(e,t){"use strict";function n(e){var t=[];f(t,u).chars(e);return t.join("")}var r=t.$$minErr("$sanitize"),i,a,o,l,s,u,c,d,f;t.module("ngSanitize",[]).provider("$sanitize",function(){function n(e,t){var n={},r=e.split(","),i;for(i=0;i<r.length;i++)n[t?s(r[i]):r[i]]=!0;return n}function g(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function p(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0);e=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var a=n[r],o=a.name.toLowerCase();if("xmlns:ns1"===o||0===o.lastIndexOf("ns1:",0))t.removeAttributeNode(a),r--,i--}(n=t.firstChild)&&m(n);t=h("nextSibling",t)}}function h(e,t){var n=t[e];if(n&&c.call(t,n))throw r("elclob",t.outerHTML||t.outerText);return n}var v=!1;this.$get=["$$sanitizeUri",function(e){v&&a(S,x);return function(t){var n=[];d(t,f(n,function(t,n){return!/^unsafe:/.test(e(t,n))}));return n.join("")}}];this.enableSvg=function(e){return l(e)?(v=e,this):v};i=t.bind;a=t.extend;o=t.forEach;l=t.isDefined;s=t.lowercase;u=t.noop;d=function(t,n){null===t||void 0===t?t="":"string"!==typeof t&&(t=""+t);F.innerHTML=t;var i=5;do{if(0===i)throw r("uinput");i--;e.document.documentMode&&m(F);t=F.innerHTML;F.innerHTML=t}while(t!==F.innerHTML);for(i=F.firstChild;i;){switch(i.nodeType){case 1:n.start(i.nodeName.toLowerCase(),g(i.attributes));break;case 3:n.chars(i.textContent)}var a;if(!(a=i.firstChild)&&(1===i.nodeType&&n.end(i.nodeName.toLowerCase()),a=h("nextSibling",i),!a))for(;null==a;){i=h("parentNode",i);if(i===F)break;a=h("nextSibling",i);1===i.nodeType&&n.end(i.nodeName.toLowerCase())}i=a}for(;i=F.firstChild;)F.removeChild(i)};f=function(e,t){var n=!1,r=i(e,e.push);return{start:function(e,i){e=s(e);!n&&k[e]&&(n=e);n||!0!==S[e]||(r("<"),r(e),o(i,function(n,i){var a=s(i),o="img"===e&&"src"===a||"background"===a;!0!==E[a]||!0===A[a]&&!t(n,o)||(r(" "),r(i),r('="'),r(p(n)),r('"'))}),r(">"))},end:function(e){e=s(e);n||!0!==S[e]||!0===$[e]||(r("</"),r(e),r(">"));e==n&&(n=!1)},chars:function(e){n||r(p(e))}}};c=e.Node.prototype.contains||function(e){return!!(this.compareDocumentPosition(e)&16)};var y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^#-~ |!])/g,$=n("area,br,col,hr,img,wbr"),C=n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),w=n("rp,rt"),D=a({},w,C),C=a({},C,n("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),w=a({},w,n("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=n("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),k=n("script,style"),S=a({},$,C,w,D),A=n("background,cite,href,longdesc,src,xlink:href"),D=n("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),w=n("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),E=a({},A,w,D),F;(function(e){if(e.document&&e.document.implementation)e=e.document.implementation.createHTMLDocument("inert");else throw r("noinert");var t=(e.documentElement||e.getDocumentElement()).getElementsByTagName("body");1===t.length?F=t[0]:(t=e.createElement("html"),F=e.createElement("body"),t.appendChild(F),e.appendChild(t))})(e)}).info({angularVersion:"1.6.4"});t.module("ngSanitize").filter("linky",["$sanitize",function(e){var r=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,a=t.$$minErr("linky"),o=t.isDefined,l=t.isFunction,s=t.isObject,u=t.isString;return function(t,c,d){function f(e){e&&h.push(n(e))}function g(e,t){var n,r=p(e);h.push("<a ");for(n in r)h.push(n+'="'+r[n]+'" ');!o(c)||"target"in r||h.push('target="',c,'" ');h.push('href="',e.replace(/"/g,"&quot;"),'">');f(t);h.push("</a>")}if(null==t||""===t)return t;if(!u(t))throw a("notstring",t);for(var p=l(d)?d:s(d)?function(){return d}:function(){return{}},m=t,h=[],v,y;t=m.match(r);)v=t[0],t[2]||t[4]||(v=(t[3]?"http://":"mailto:")+v),y=t.index,f(m.substr(0,y)),g(v,t[0].replace(i,"")),m=m.substring(y+t[0].length);f(m);return e(h.join(""))}}])})(window,window.angular);!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var r=n(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,t,n){function r(r){function i(e){u.notify&&u.notify(e),c.progressFunc&&n(function(){c.progressFunc(e)})}function l(e){return null!=r._start&&o?{loaded:e.loaded+r._start,total:r._file&&r._file.size||e.total,type:e.type,config:r,lengthComputable:!0,target:e.target}:e}function s(){e(r).then(function(e){if(o&&r._chunkSize&&!r._finished&&r._file){var t=r._file&&r._file.size||0;i({loaded:Math.min(r._end,t),total:t,config:r,type:"progress"}),a.upload(r,!0)}else r._finished&&delete r._finished,u.resolve(e)},function(e){u.reject(e)},function(e){u.notify(e)})}r.method=r.method||"POST",r.headers=r.headers||{};var u=r._deferred=r._deferred||t.defer(),c=u.promise;return r.disableProgress||(r.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,i(l(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,i(l(e)))},!1))}}),o?r._chunkSize&&r._end&&!r._finished?(r._start=r._end,r._end+=r._chunkSize,s()):r.resumeSizeUrl?e.get(r.resumeSizeUrl).then(function(e){r._start=r.resumeSizeResponseReader?r.resumeSizeResponseReader(e.data):parseInt((null==e.data.size?e.data:e.data.size).toString()),r._chunkSize&&(r._end=r._start+r._chunkSize),s()},function(e){throw e}):r.resumeSize?r.resumeSize().then(function(e){r._start=e,r._chunkSize&&(r._end=r._start+r._chunkSize),s()},function(e){throw e}):(r._chunkSize&&(r._start=0,r._end=r._start+r._chunkSize),s()):s(),c.success=function(e){return c.then(function(t){e(t.data,t.status,t.headers,r)}),c},c.error=function(e){return c.then(null,function(t){e(t.data,t.status,t.headers,r)}),c},c.progress=function(e){return c.progressFunc=e,c.then(null,null,function(t){e(t)}),c},c.abort=c.pause=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),c},c.xhr=function(e){return r.xhrFn=function(t){return function(){t&&t.apply(c,arguments),e.apply(c,arguments)}}(r.xhrFn),c},a.promisesCount++,c["finally"]&&c["finally"]instanceof Function&&c["finally"](function(){a.promisesCount--}),c}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var a=this;a.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var o=this.isResumeSupported();this.isUploadInProgress=function(){return a.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&o){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var r=t.slice(e._start,e._end||t.size);return r.name=t.name,r.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._chunkSize),n.append("_currentChunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),r}return t}function l(t,r,i){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))t.append(i,r);else if(a.isFile(r)){var o=n(r,t),s=i.split(",");s[1]&&(o.ngfName=s[1].replace(/^\s+|\s+$/g,""),i=s[0]),e._fileKey=e._fileKey||i,t.append(i,o,o.ngfName||o.name)}else if(angular.isObject(r)){if(r.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+i;r.$$ngfCircularDetection=!0;try{for(var u in r)if(r.hasOwnProperty(u)&&"$$ngfCircularDetection"!==u){var c=null==e.objectKey?"[i]":e.objectKey;r.length&&parseInt(u)>-1&&(c=null==e.arrayKey?c:e.arrayKey),l(t,r[u],i+c.replace(/[ik]/g,u))}}finally{delete r.$$ngfCircularDetection}}else t.append(i,r)}function s(){e._chunkSize=a.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n,r=new window.FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(n in t)if(t.hasOwnProperty(n)){var i=t[n];e.formDataAppender?e.formDataAppender(r,n,i):l(r,i,n)}return r})}return t||(e=i(e)),e._isDigested||(e._isDigested=!0,s()),r(e)},this.http=function(t){return t=i(t),t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=a.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,r(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=t.defer();return e({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),i=e.headers("content-type")||"image/WebP",a=new window.Blob([t],{type:i}),o=n.match(/.*\/(.+?)(\?.*)?$/);o.length>1&&(a.name=o[1]),r.resolve(a)},function(e){r.reject(e)}),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,t,n,r,i){function a(e,t,n){var i=[s.emptyPromise()];return angular.forEach(e,function(r,a){0===r.type.indexOf("image/jpeg")&&s.attrGetter("ngfFixOrientation",t,n,{$file:r})&&i.push(s.happyPromise(s.applyExifRotation(r),r).then(function(t){e.splice(a,1,t)}))}),r.all(i)}function o(e,t,n,i){var a=s.attrGetter("ngfResize",t,n);if(!a||!s.isResizeSupported()||!e.length)return s.emptyPromise();if(a instanceof Function){var o=r.defer();return a(e).then(function(r){l(r,e,t,n,i).then(function(e){o.resolve(e)},function(e){o.reject(e)})},function(e){o.reject(e)})}return l(a,e,t,n,i)}function l(e,t,n,i,a){function o(r,o){if(0===r.type.indexOf("image")){if(e.pattern&&!s.validatePattern(r,e.pattern))return;e.resizeIf=function(e,t){return s.attrGetter("ngfResizeIf",n,i,{$width:e,$height:t,$file:r})};var u=s.resize(r,e);l.push(u),u.then(function(e){t.splice(o,1,e)},function(e){r.$error="resize",(r.$errorMessages=r.$errorMessages||{}).resize=!0,r.$errorParam=(e?(e.message?e.message:e)+": ":"")+(r&&r.name),a.$ngfValidations.push({name:"resize",valid:!1}),s.applyModelValidation(a,t)})}}for(var l=[s.emptyPromise()],u=0;u<t.length;u++)o(t[u],u);return r.all(l)}var s=i;return s.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=s.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},s.attrGetter=function(t,n,r,i){var a=this.getAttrWithDefaults(n,t);if(!r)return a;try{return i?e(a)(r,i):e(a)(r)}catch(e){if(t.search(/min|max|pattern/i))return a;throw e}},s.shouldUpdateOn=function(e,t,n){var r=s.attrGetter("ngfModelOptions",t,n);return r&&r.updateOn?r.updateOn.split(" ").indexOf(e)>-1:!0},s.emptyPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.resolve.apply(e,n)}),e.promise},s.rejectPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.reject.apply(e,n)}),e.promise},s.happyPromise=function(e,n){var i=r.defer();return e.then(function(e){i.resolve(e)},function(e){t(function(){throw e}),i.resolve(n)}),i.promise},s.updateModel=function(n,r,i,l,u,c,d){function f(a,o,u,d,f){r.$$ngfPrevValidFiles=a,r.$$ngfPrevInvalidFiles=o;var g=a&&a.length?a[0]:null,p=o&&o.length?o[0]:null;n&&(s.applyModelValidation(n,a),n.$setViewValue(f?g:a)),l&&e(l)(i,{$files:a,$file:g,$newFiles:u,$duplicateFiles:d,$invalidFiles:o,$invalidFile:p,$event:c});var m=s.attrGetter("ngfModelInvalid",r);m&&t(function(){e(m).assign(i,f?p:o)}),t(function(){})}function g(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function t(t){var n;for(n=0;n<v.length;n++)if(e(t,v[n]))return!0;for(n=0;n<y.length;n++)if(e(t,y[n]))return!0;return!1}if(u){h=[],b=[];for(var n=0;n<u.length;n++)t(u[n])?b.push(u[n]):h.push(u[n])}}function p(e){return angular.isArray(e)?e:[e]}function m(){function e(){t(function(){f(w?v.concat(C):C,w?y.concat($):$,u,b,D)},k&&k.debounce?k.debounce.change||k.debounce:0)}var a=x?h:C;o(a,r,i,n).then(function(){x?s.validate(h,w?v.length:0,n,r,i).then(function(t){C=t.validsFiles,$=t.invalidsFiles,e()}):e()},function(){for(var t=0;t<a.length;t++){var n=a[t];if("resize"===n.$error){var r=C.indexOf(n);r>-1&&(C.splice(r,1),$.push(n)),e()}}})}var h,v,y,b=[],$=[],C=[];v=r.$$ngfPrevValidFiles||[],y=r.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(v=p(n.$modelValue));var w=s.attrGetter("ngfKeep",r,i);h=(u||[]).slice(0),("distinct"===w||s.attrGetter("ngfKeepDistinct",r,i)===!0)&&g(r,i);var D=!w&&!s.attrGetter("ngfMultiple",r,i)&&!s.attrGetter("multiple",r);if(!w||h.length){s.attrGetter("ngfBeforeModelChange",r,i,{$files:u,$file:u&&u.length?u[0]:null,$newFiles:h,$duplicateFiles:b,$event:c});var x=s.attrGetter("ngfValidateAfterResize",r,i),k=s.attrGetter("ngfModelOptions",r,i);s.validate(h,w?v.length:0,n,r,i).then(function(e){d?f(h,[],u,b,D):(k&&k.allowInvalid||x?C=h:(C=e.validFiles,$=e.invalidFiles),s.attrGetter("ngfFixOrientation",r,i)&&s.isExifSupported()?a(C,r,i).then(function(){m()}):m())})}},s}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,r){function i(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function a(e,t,n,r,a,l,s,u){function c(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return b("ngfChange")||b("ngfSelect")}function f(t){if(u.shouldUpdateOn("change",n,e)){var i=t.__files_||t.target&&t.target.files,a=[];if(!i)return;for(var o=0;o<i.length;o++)a.push(i[o]);u.updateModel(r,n,e,d(),a.length?a:null,t)}}function g(e,r){function i(t){e.attr("id","ngf-"+t),r.attr("id","ngf-label-"+t)}for(var a=0;a<t[0].attributes.length;a++){var o=t[0].attributes[a];"type"!==o.name&&"class"!==o.name&&"style"!==o.name&&("id"===o.name?(i(o.value),$.push(n.$observe("id",i))):e.attr(o.name,o.value||"required"!==o.name&&"multiple"!==o.name?o.value:o.name))}}function p(){if(c())return t;var e=angular.element('<input type="file">'),n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),g(e,n),o.push({el:t,ref:n}),document.body.appendChild(n.append(e)[0]),e}function m(n){if(t.attr("disabled"))return!1;if(!b("ngfSelectDisabled",e)){var r=h(n);if(null!=r)return r;v(n);try{c()||document.body.contains(D[0])||(o.push({el:t,ref:D.parent()}),document.body.appendChild(D.parent()[0]),D.bind("change",f))}catch(e){}return i(navigator.userAgent)?setTimeout(function(){D[0].click()},0):D[0].click(),!1}}function h(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return w=t[0].clientX,C=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,r=t[0].clientY;if(Math.abs(n-w)>20||Math.abs(r-C)>20)return e.stopPropagation(),e.preventDefault(),!1}return!0}}function v(t){u.shouldUpdateOn("click",n,e)&&D.val()&&(D.val(null),u.updateModel(r,n,e,d(),null,t,!0))}function y(e){if(D&&!D.attr("__ngf_ie10_Fix_")){if(!D[0].parentNode)return void(D=null);e.preventDefault(),e.stopPropagation(),D.unbind("click");var t=D.clone();return D.replaceWith(t),D=t,D.attr("__ngf_ie10_Fix_","true"),D.bind("change",f),D.bind("click",y),D[0].click(),!1}D.removeAttr("__ngf_ie10_Fix_")}var b=function(e,t){return u.attrGetter(e,n,t)};u.registerModelChangeValidator(r,n,e);var $=[];b("ngfMultiple")&&$.push(e.$watch(b("ngfMultiple"),function(){D.attr("multiple",b("ngfMultiple",e))})),b("ngfCapture")&&$.push(e.$watch(b("ngfCapture"),function(){D.attr("capture",b("ngfCapture",e))})),b("ngfAccept")&&$.push(e.$watch(b("ngfAccept"),function(){D.attr("accept",b("ngfAccept",e))})),$.push(n.$observe("accept",function(){D.attr("accept",b("accept"))}));var C=0,w=0,D=t;c()||(D=p()),D.bind("change",f),c()?t.bind("click",v):t.bind("click touchstart touchend",m),-1!==navigator.appVersion.indexOf("MSIE 10")&&D.bind("click",y),r&&r.$formatters.push(function(e){return(null==e||0===e.length)&&D.val()&&D.val(null),e}),e.$on("$destroy",function(){c()||D.parent().remove(),angular.forEach($,function(e){e()})}),l(function(){for(var e=0;e<o.length;e++){var t=o[e];document.body.contains(t.el[0])||(o.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,D,f)}var o=[];return{restrict:"AEC",require:"?ngModel",link:function(i,o,l,s){a(i,o,l,s,e,t,n,r)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,r,i,a,o,l,s){function u(e){var o=t.attrGetter("ngfNoObjectUrl",a,r);t.dataUrl(e,o)["finally"](function(){n(function(){var t=(o?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;s?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ng-hide"):i.addClass("ng-hide")})})}n(function(){var n=r.$watch(a[o],function(n){var c=l;if("ngfThumbnail"===o&&(c||(c={width:i[0].naturalWidth||i[0].clientWidth,height:i[0].naturalHeight||i[0].clientHeight}),0===c.width&&window.getComputedStyle)){var d=getComputedStyle(i[0]);d.width&&d.width.indexOf("px")>-1&&d.height&&d.height.indexOf("px")>-1&&(c={width:parseInt(d.width.slice(0,-2)),height:parseInt(d.height.slice(0,-2))})}return angular.isString(n)?(i.removeClass("ng-hide"),s?i.css("background-image","url('"+n+"')"):i.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(i[0]))||s&&0!==n.type.indexOf("image")?i.addClass("ng-hide"):c&&t.isResizeSupported()?(c.resizeIf=function(e,i){return t.attrGetter("ngfResizeIf",a,r,{$width:e,$height:i,$file:n})},t.resize(n,c).then(function(e){u(e)},function(e){throw e})):u(n))});r.$on("$destroy",function(){n()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),i=0;return angular.forEach(e,function(n){r.dataUrl(n,!0)["finally"](function(){if(i++,i===e.length){var n=[];angular.forEach(e,function(e){n.push(e.$ngfDataUrl)}),t.resolve(n,e)}})}),t.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,i){if(!e)return r.emptyPromise(e,e);if(i&&null!=e.$ngfDataUrl||!i&&null!=e.$ngfBlobUrl)return r.emptyPromise(i?e.$ngfDataUrl:e.$ngfBlobUrl,e);var a=i?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(a)return a;var o=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!i){var a;try{a=n.createObjectURL(e)}catch(n){return void t(function(){e.$ngfBlobUrl="",o.reject()})}t(function(){if(e.$ngfBlobUrl=a,a){o.resolve(a,e),r.blobUrls=r.blobUrls||[],r.blobUrlsTotalSize=r.blobUrlsTotalSize||0,r.blobUrls.push({url:a,size:e.size}),r.blobUrlsTotalSize+=e.size||0;for(var t=r.defaults.blobUrlsMaxMemory||268435456,i=r.defaults.blobUrlsMaxQueueSize||200;(r.blobUrlsTotalSize>t||r.blobUrls.length>i)&&r.blobUrls.length>1;){var l=r.blobUrls.splice(0,1)[0];n.revokeObjectURL(l.url),r.blobUrlsTotalSize-=l.size}}})}else{var l=new FileReader;l.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,o.resolve(n.target.result,e),t(function(){delete e.$ngfDataUrl},1e3)})},l.onerror=function(){t(function(){e.$ngfDataUrl="",o.reject()})},l.readAsDataURL(e)}}else t(function(){e[i?"$ngfDataUrl":"$ngfBlobUrl"]="",o.reject()})}),a=i?e.$$ngfDataUrlPromise=o.promise:e.$$ngfBlobUrlPromise=o.promise,a["finally"](function(){delete e[i?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),a},r}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){t(e,n,r,i,a,"ngfSrc",e.attrGetter("ngfResize",a,r),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){t(e,n,r,i,a,"ngfBackground",e.attrGetter("ngfResize",a,r),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){var o=e.attrGetter("ngfSize",a,r);t(e,n,r,i,a,"ngfThumbnail",o,e.attrGetter("ngfAsBackground",a,r))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,t){return function(n,r,i){if(angular.isString(n))return t.trustAsResourceUrl(n);var a=n&&((r?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!a?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,r)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&a?i?t.trustAsResourceUrl(a):a:n)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function r(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var a=0;a<i.length;a++){var o=r(i[a]);o.regexp?(t+="("+o.regexp+")",a<i.length-1&&(t+="|")):n=n.concat(o.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}function i(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}var a=e;return a.validatePattern=function(e,t){if(!t)return!0;var n=r(t),i=!0;if(n.regexp&&n.regexp.length){var a=new RegExp(n.regexp,"i");i=null!=e.type&&a.test(e.type)||null!=e.name&&a.test(e.name)}for(var o=n.excludes.length;o--;){var l=new RegExp(n.excludes[o],"i");i=i&&(null==e.type||l.test(e.type))&&(null==e.name||l.test(e.name))}return i},a.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},a.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push(function(r){if(e.$dirty){var i=r;r&&!angular.isArray(r)&&(i=[r]),a.validate(i,0,e,t,n).then(function(){a.applyModelValidation(e,i)})}return r})},a.applyModelValidation=function(e,t){i(e,t),angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})},a.getValidationAttr=function(e,t,n,r,i){var o="ngf"+n[0].toUpperCase()+n.substr(1),l=a.attrGetter(o,e,t,{$file:i});if(null==l&&(l=a.attrGetter("ngfValidate",e,t,{$file:i}))){var s=(r||n).split(".");l=l[s[0]],s.length>1&&(l=l&&l[s[1]])}return l},a.validate=function(e,n,r,i,o){function l(t,n,l){if(e){for(var s=e.length,u=null;s--;){var g=e[s];if(g){var p=a.getValidationAttr(i,o,t,n,g);null!=p&&(l(g,p,s)||(-1===c.indexOf(t)?(g.$error=t,(g.$errorMessages=g.$errorMessages||{})[t]=!0,g.$errorParam=p,-1===f.indexOf(g)&&f.push(g),d||e.splice(s,1),u=!1):e.splice(s,1)))}}null!==u&&r.$ngfValidations.push({name:t,valid:u})}}function s(n,l,s,g,p){function m(t,r,i){function a(a){if(a())if(-1===c.indexOf(n)){if(r.$error=n,(r.$errorMessages=r.$errorMessages||{})[n]=!0,r.$errorParam=i,-1===f.indexOf(r)&&f.push(r),!d){var o=e.indexOf(r);o>-1&&e.splice(o,1)}t.resolve(!1)}else{var l=e.indexOf(r);l>-1&&e.splice(l,1),t.resolve(!0)}else t.resolve(!0)}null!=i?g(r,i).then(function(e){a(function(){return!p(e,i)})},function(){a(function(){return u("ngfValidateForce",{$file:r})})}):t.resolve(!0)}var h=[a.emptyPromise(!0)];e&&(e=void 0===e.length?[e]:e,angular.forEach(e,function(e){var r=t.defer();return h.push(r.promise),!s||null!=e.type&&0===e.type.search(s)?void("dimensions"===n&&null!=a.attrGetter("ngfDimensions",i)?a.imageDimensions(e).then(function(t){m(r,e,u("ngfDimensions",{$file:e,$width:t.width,$height:t.height}))},function(){r.resolve(!1)}):"duration"===n&&null!=a.attrGetter("ngfDuration",i)?a.mediaDuration(e).then(function(t){m(r,e,u("ngfDuration",{$file:e,$duration:t}))},function(){r.resolve(!1)}):m(r,e,a.getValidationAttr(i,o,n,l,e))):void r.resolve(!0)}));var v=t.defer();return t.all(h).then(function(e){for(var t=!0,i=0;i<e.length;i++)if(!e[i]){t=!1;break}r.$ngfValidations.push({name:n,valid:t}),v.resolve(t)}),v.promise}r=r||{},r.$ngfValidations=r.$ngfValidations||[],angular.forEach(r.$ngfValidations,function(e){e.valid=!0});var u=function(e,t){return a.attrGetter(e,i,o,t)},c=(a.attrGetter("ngfIgnoreInvalid",i,o)||"").split(" "),d=a.attrGetter("ngfRunAllValidations",i,o);if(null==e||0===e.length)return a.emptyPromise({validFiles:e,invalidFiles:[]});e=void 0===e.length?[e]:e.slice(0);var f=[];l("pattern",null,a.validatePattern),l("minSize","size.min",function(e,t){return e.size+.1>=a.translateScalars(t)}),l("maxSize","size.max",function(e,t){return e.size-.1<=a.translateScalars(t)});var g=0;if(l("maxTotalSize",null,function(t,n){return g+=t.size,g>a.translateScalars(n)?(e.splice(0,e.length),!1):!0}),l("validateFn",null,function(e,t){return t===!0||null===t||""===t}),!e.length)return a.emptyPromise({validFiles:[],invalidFiles:f});var p=t.defer(),m=[];return m.push(s("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),m.push(s("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),m.push(s("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),m.push(s("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),m.push(s("dimensions",null,/image/,function(e,t){return a.emptyPromise(t)},function(e){return e})),m.push(s("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-a.ratioToFloat(n[i]))<.01&&(r=!0);return r})),m.push(s("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-a.ratioToFloat(t)<1e-4})),m.push(s("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return e.width/e.height-a.ratioToFloat(t)>-1e-4})),m.push(s("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=a.translateScalars(t)})),m.push(s("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=a.translateScalars(t)})),m.push(s("duration",null,/audio|video/,function(e,t){return a.emptyPromise(t)},function(e){return e})),m.push(s("validateAsyncFn",null,null,function(e,t){return t},function(e){return e===!0||null===e||""===e})),t.all(m).then(function(){if(d)for(var t=0;t<e.length;t++){var r=e[t];r.$error&&e.splice(t--,1)}d=!1,l("maxFiles",null,function(e,t,r){return t>n+r}),p.resolve({validFiles:e,invalidFiles:f})}),p.promise},a.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=t.defer();return n(function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void i.reject("not image"):void a.dataUrl(e).then(function(t){function r(){var t=l[0].naturalWidth||l[0].clientWidth,n=l[0].naturalHeight||l[0].clientHeight;l.remove(),e.$ngfWidth=t,e.$ngfHeight=n,i.resolve({width:t,height:n})}function a(){l.remove(),i.reject("load error")}function o(){n(function(){l[0].parentNode&&(l[0].clientWidth?r():s++>10?a():o())},1e3)}var l=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");l.on("load",r),l.on("error",a);var s=0;o(),angular.element(document.getElementsByTagName("body")[0]).append(l)},function(){i.reject("load error")})}),e.$ngfDimensionPromise=i.promise,e.$ngfDimensionPromise["finally"](function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},a.mediaDuration=function(e){if(e.$ngfDuration){var r=t.defer();return n(function(){r.resolve(e.$ngfDuration)}),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void i.reject("not media"):void a.dataUrl(e).then(function(t){function r(){var t=l[0].duration;e.$ngfDuration=t,l.remove(),i.resolve(t)}function a(){l.remove(),i.reject("load error")}function o(){n(function(){l[0].parentNode&&(l[0].duration?r():s>10?a():o())},1e3)}var l=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");l.on("loadedmetadata",r),l.on("error",a);var s=0;o(),angular.element(document.body).append(l)},function(){i.reject("load error")})}),e.$ngfDurationPromise=i.promise,e.$ngfDurationPromise["finally"](function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},a}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var n=e,r=function(e,t,n,r,i){var a=i?Math.max(n/e,r/t):Math.min(n/e,r/t);return{width:e*a,height:t*a,marginX:e*a-n,marginY:t*a-r}},i=function(e,i,a,o,l,s,u,c){var d=t.defer(),f=document.createElement("canvas"),g=document.createElement("img");return g.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(g),g.onload=function(){var e=g.width,t=g.height;if(g.parentNode.removeChild(g),null!=c&&c(e,t)===!1)return void d.reject("resizeIf");try{if(s){var p=n.ratioToFloat(s),m=e/t;p>m?(i=e,a=i/p):(a=t,i=a*p)}i||(i=e),a||(a=t);var h=r(e,t,i,a,u);f.width=Math.min(h.width,i),f.height=Math.min(h.height,a);var v=f.getContext("2d");v.drawImage(g,Math.min(0,-h.marginX/2),Math.min(0,-h.marginY/2),h.width,h.height),d.resolve(f.toDataURL(l||"image/WebP",o||.934))}catch(e){d.reject(e)}},g.onerror=function(){g.parentNode.removeChild(g),d.reject()},g.src=e,d.promise};return n.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,l=new Uint8Array(o);o--;)l[o]=a.charCodeAt(o);var s=new window.Blob([l],{type:i});return s.name=t,s.$ngfOrigSize=n,s},n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,r){if(0!==e.type.indexOf("image"))return n.emptyPromise(e);var a=t.defer();return n.dataUrl(e,!0).then(function(t){i(t,r.width,r.height,r.quality,r.type||e.type,r.ratio,r.centerCrop,r.resizeIf).then(function(i){if("image/jpeg"===e.type&&r.restoreExif!==!1)try{i=n.restoreExif(t,i)}catch(e){setTimeout(function(){throw e},1)}try{var o=n.dataUrltoBlob(i,e.name,e.size);a.resolve(o)}catch(e){a.reject(e)}},function(t){"resizeIf"===t&&a.resolve(e),a.reject(t)})},function(e){a.reject(e)}),a.promise},n}]),function(){function e(e,n,r,i,a,o,l,s,u,c){function d(){return n.attr("disabled")||y("ngfDropDisabled",e)}function f(t,n,r){if(t){var i;try{i=t&&t.getData&&t.getData("text/html")}catch(e){}h(t.items,t.files,y("ngfAllowDir",e)!==!1,y("multiple")||y("ngfMultiple",e)).then(function(e){e.length?g(e,n):p(r,i).then(function(e){g(e,n)})})}}function g(t,n){s.updateModel(i,r,e,y("ngfChange")||y("ngfDrop"),t,n)}function p(t,n){if(!s.shouldUpdateOn(t,r,e)||"string"!=typeof n)return s.rejectPromise([]);var i=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){i.push(n)});var a=[],o=[];if(i.length){angular.forEach(i,function(e){a.push(s.urlToBlob(e).then(function(e){o.push(e)}))});var l=c.defer();return c.all(a).then(function(){l.resolve(o)},function(e){l.reject(e)}),l.promise}return s.emptyPromise()}function m(e,t,n,r){var i=y("ngfDragOverClass",e,{$event:n}),a="dragover";if(angular.isString(i))a=i;else if(i&&(i.delay&&(w=i.delay),i.accept||i.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var l=i.pattern||y("ngfPattern",e,{$event:n}),u=o.length;u--;){if(!s.validatePattern(o[u],l)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}function h(t,n,i,a){function o(e,t){var n=c.defer();if(null!=e)if(e.isDirectory){var r=[s.emptyPromise()];if(f){var i={type:"directory"};i.name=i.path=(t||"")+e.name,g.push(i)}var a=e.createReader(),l=[],m=function(){a.readEntries(function(i){try{i.length?(l=l.concat(Array.prototype.slice.call(i||[],0)),m()):(angular.forEach(l.slice(0),function(n){g.length<=u&&d>=p&&r.push(o(n,(t?t:"")+e.name+"/"))}),c.all(r).then(function(){n.resolve()},function(e){n.reject(e)}))}catch(e){n.reject(e)}},function(e){n.reject(e)})};m()}else e.file(function(e){try{e.path=(t?t:"")+e.name,f&&(e=s.rename(e,e.path)),g.push(e),p+=e.size,n.resolve()}catch(e){n.reject(e)}},function(e){n.reject(e)});return n.promise}var u=s.getValidationAttr(r,e,"maxFiles");null==u&&(u=Number.MAX_VALUE);var d=s.getValidationAttr(r,e,"maxTotalSize");null==d&&(d=Number.MAX_VALUE);var f=y("ngfIncludeDir",e),g=[],p=0,m=[s.emptyPromise()];if(t&&t.length>0&&"file:"!==l.location.protocol)for(var h=0;h<t.length;h++){if(t[h].webkitGetAsEntry&&t[h].webkitGetAsEntry()&&t[h].webkitGetAsEntry().isDirectory){var v=t[h].webkitGetAsEntry();if(v.isDirectory&&!i)continue;null!=v&&m.push(o(v))}else{var b=t[h].getAsFile();null!=b&&(g.push(b),p+=b.size)}if(g.length>u||p>d||!a&&g.length>0)break}else if(null!=n)for(var $=0;$<n.length;$++){var C=n.item($);if((C.type||C.size>0)&&(g.push(C),p+=C.size),g.length>u||p>d||!a&&g.length>0)break}var w=c.defer();return c.all(m).then(function(){if(a||f||!g.length)w.resolve(g);else{for(var e=0;g[e]&&"directory"===g[e].type;)e++;w.resolve([g[e]])}},function(e){w.reject(e)}),w.promise}var v=t(),y=function(e,t,n){return s.attrGetter(e,r,t,n)};if(y("dropAvailable")&&o(function(){e[y("dropAvailable")]?e[y("dropAvailable")].value=v:e[y("dropAvailable")]=v}),!v)return void(y("ngfHideOnDropNotAvailable",e)===!0&&n.css("display","none"));null==y("ngfSelect")&&s.registerModelChangeValidator(i,r,e);var b,$=null,C=a(y("ngfStopPropagation")),w=1;n[0].addEventListener("dragover",function(t){if(!d()&&s.shouldUpdateOn("drop",r,e)){if(t.preventDefault(),C(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}o.cancel($),b||(b="C",m(e,r,t,function(r){b=r,n.addClass(b),y("ngfDrag",e,{$isDragging:!0,$class:b,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!d()&&s.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),C(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!d()&&s.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),C(e)&&t.stopPropagation(),$=o(function(){b&&n.removeClass(b),b=null,y("ngfDrag",e,{$isDragging:!1,$event:t})},w||100))},!1),n[0].addEventListener("drop",function(t){!d()&&s.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),C(e)&&t.stopPropagation(),b&&n.removeClass(b),b=null,f(t.dataTransfer,t,"dropUrl"))},!1),n[0].addEventListener("paste",function(t){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&y("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!d()&&s.shouldUpdateOn("paste",r,e)&&f(t.clipboardData||t.originalEvent.clipboardData,t,"pasteUrl")},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&y("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(t,n,r,i,a,o){return{restrict:"AEC",require:"?ngModel",link:function(l,s,u,c){e(l,s,u,c,t,n,r,i,a,o)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(i,a,o){if(t()){var l=e(r.attrGetter("ngfDropAvailable",o));n(function(){l(i),l.assign&&l.assign(i,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,t){function n(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:return e.transform(0,-1,1,0,0,n)}}function r(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;r>i;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}var i=e;return i.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&i.isResizeSupported()},i.readOrientation=function(e){var n=t.defer(),r=new FileReader,i=e.slice?e.slice(0,65536):e;return r.readAsArrayBuffer(i),r.onerror=function(e){return n.reject(e)},r.onload=function(e){var t={orientation:1},r=new DataView(this.result);if(65496!==r.getUint16(0,!1))return n.resolve(t);for(var i=r.byteLength,a=2;i>a;){var o=r.getUint16(a,!1);if(a+=2,65505===o){if(1165519206!==r.getUint32(a+=2,!1))return n.resolve(t);var l=18761===r.getUint16(a+=6,!1);a+=r.getUint32(a+4,l);var s=r.getUint16(a,l);a+=2;for(var u=0;s>u;u++)if(274===r.getUint16(a+12*u,l)){var c=r.getUint16(a+12*u+8,l);return c>=2&&8>=c&&(r.setUint16(a+12*u+8,1,l),t.fixedArrayBuffer=e.target.result),t.orientation=c,n.resolve(t)}}else{if(65280!==(65280&o))break;a+=r.getUint16(a,!1)}}return n.resolve(t)},n.promise},i.applyExifRotation=function(e){if(0!==e.type.indexOf("image/jpeg"))return i.emptyPromise(e);var a=t.defer();return i.readOrientation(e).then(function(t){return t.orientation<2||t.orientation>8?a.resolve(e):void i.dataUrl(e,!0).then(function(o){var l=document.createElement("canvas"),s=document.createElement("img");s.onload=function(){try{l.width=t.orientation>4?s.height:s.width,l.height=t.orientation>4?s.width:s.height;var o=l.getContext("2d");n(o,t.orientation,s.width,s.height),o.drawImage(s,0,0);var u=l.toDataURL(e.type||"image/WebP",.934);u=i.restoreExif(r(t.fixedArrayBuffer),u);var c=i.dataUrltoBlob(u,e.name);a.resolve(c)}catch(e){return a.reject(e)}},s.onerror=function(){a.reject()},s.src=o},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise},i.restoreExif=function(e,t){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(e){var t,n,r,i,a,o="",l="",s="",u=0;do{t=e[u++],n=e[u++],l=e[u++],r=t>>2,i=(3&t)<<4|n>>4,a=(15&n)<<2|l>>6,s=63&l,isNaN(n)?a=s=64:isNaN(l)&&(s=64),o=o+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s),t=n=l="",r=i=a=s=""}while(u<e.length);return o},n.restore=function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},n.exifManipulation=function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},n.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(t=e[n],255===t[0]&225===t[1])return t;return[]},n.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),a=r.slice(0,i),o=r.slice(i),l=a;return l=l.concat(t),l=l.concat(o)},n.slice2Segments=function(e){for(var t=0,n=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var r=256*e[t+2]+e[t+3],i=t+r+2,a=e.slice(t,i);n.push(a),t=i}if(t>e.length)break}return n},n.decode64=function(e){var t,n,r,i,a,o="",l="",s=0,u=[],c=/[^A-Za-z0-9\+\/\=]/g;c.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{r=this.KEY_STR.indexOf(e.charAt(s++)),i=this.KEY_STR.indexOf(e.charAt(s++)),a=this.KEY_STR.indexOf(e.charAt(s++)),l=this.KEY_STR.indexOf(e.charAt(s++)),t=r<<2|i>>4,n=(15&i)<<4|a>>2,o=(3&a)<<6|l,u.push(t),64!==a&&u.push(n),64!==l&&u.push(o),t=n=o="",r=i=a=l=""}while(s<e.length);return u},n.restore(e,t)},i}]);(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("localytics.directives",[]),angular.module("localytics.directives").directive("chosen",["$timeout",function(t){var n,r,i,a;return r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,n=["persistentCreateOption","createOptionText","createOption","skipNoResults","noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width","includeGroupLabelInSelected","maxShownResults"],a=function(e){return e.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()})},i=function(e){var t;if(angular.isArray(e))return 0===e.length;if(angular.isObject(e))for(t in e)if(e.hasOwnProperty(t))return!1;return!0},{restrict:"A",require:"?ngModel",priority:1,link:function(o,l,s,u){var c,d,f,g,p,m,h,v,y,b,C;return o.disabledValuesHistory=o.disabledValuesHistory?o.disabledValuesHistory:[],l=$(l),l.addClass("localytics-chosen"),p=o.$eval(s.chosen)||{},angular.forEach(s,function(t,r){return e.call(n,r)>=0?s.$observe(r,function(e){return p[a(r)]="{{"===String(l.attr(s.$attr[r])).slice(0,2)?e:o.$eval(e),y()}):void 0}),h=function(){return l.addClass("loading").attr("disabled",!0).trigger("chosen:updated")},v=function(){return l.removeClass("loading"),angular.isDefined(s.disabled)?l.attr("disabled",s.disabled):l.attr("disabled",!1),l.trigger("chosen:updated")},c=null,d=!1,f=function(){var e;return c?l.trigger("chosen:updated"):(t(function(){c=l.chosen(p).data("chosen")}),angular.isObject(c)?e=c.default_text:void 0)},y=function(){return d?l.attr("data-placeholder",c.results_none_found).attr("disabled",!0):l.removeAttr("data-placeholder"),l.trigger("chosen:updated")},u?(m=u.$render,u.$render=function(){return m(),f()},l.on("chosen:hiding_dropdown",function(){return o.$apply(function(){return u.$setTouched()})}),s.multiple&&(C=function(){return u.$viewValue},o.$watch(C,u.$render,!0))):f(),s.$observe("disabled",function(){return l.trigger("chosen:updated")}),s.ngOptions&&u?(g=s.ngOptions.match(r),b=g[7],o.$watchCollection(b,function(e,n){var r;return r=t(function(){return angular.isUndefined(e)?h():(d=i(e),v(),y())})}),o.$on("$destroy",function(e){return"undefined"!=typeof timer&&null!==timer?t.cancel(timer):void 0})):void 0}}}])}).call(this);!function(e,t){"object"==typeof exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(this,function(e){"use strict";e.module("ngWYSIWYG",["ngSanitize"]),e.module("ngWYSIWYG").config(["$provide",function(e){e.decorator("$sanitize",["$delegate","$log",function(e,t){return function(t,n){var r=e(t,n);return r}}])}]),e.module("ngWYSIWYG").constant("NGP_EVENTS",{ELEMENT_CLICKED:"ngp-element-clicked",CLICK_AWAY:"ngp-click-away"}),e.module("ngWYSIWYG").directive("ngpColorsGrid",["NGP_EVENTS",function(e){var t=function(t,n){t.$on(e.CLICK_AWAY,function(){t.$apply(function(){t.show=!1})}),n.parent().bind("click",function(e){e.stopPropagation()}),t.colors=["#000000","#993300","#333300","#003300","#003366","#000080","#333399","#333333","#800000","#FF6600","#808000","#008000","#008080","#0000FF","#666699","#808080","#FF0000","#FF9900","#99CC00","#339966","#33CCCC","#3366FF","#800080","#999999","#FF00FF","#FFCC00","#FFFF00","#00FF00","#00FFFF","#00CCFF","#993366","#C0C0C0","#FF99CC","#FFCC99","#FFFF99","#CCFFCC","#CCFFFF","#99CCFF","#CC99FF","#FFFFFF"],t.pick=function(e){t.onPick({color:e})},n.ready(function(){function e(t){1==t.nodeType&&(t.setAttribute("unselectable","on"),t.unselectable="on");for(var n=t.firstChild;n;)e(n),n=n.nextSibling}for(var t=0;t<document.getElementsByClassName("ngp-colors-grid").length;t+=1)e(document.getElementsByClassName("ngp-colors-grid")[t])})};return{link:t,scope:{show:"=",onPick:"&"},restrict:"AE",template:'<ul ng-show="show" class="ngp-colors-grid"><li ng-style="{\'background-color\': color}" title: "{{color}}" ng-repeat="color in colors" unselectable="on" ng-click="pick(color)"></li></ul>'}}]),e.module("ngWYSIWYG").directive("ngpSymbolsGrid",["NGP_EVENTS",function(e){var t=function(t,n){t.$on(e.CLICK_AWAY,function(){t.$apply(function(){t.show=!1})}),n.parent().bind("click",function(e){e.stopPropagation()}),t.symbols=["&iexcl;","&iquest;","&ndash;","&mdash;","&raquo;","&laquo;","&copy;","&divide;","&micro;","&para;","&plusmn;","&cent;","&euro;","&pound;","&reg;","&sect;","&trade;","&yen;","&deg;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&uarr;","&rarr;","&darr;","&spades;","&clubs;","&hearts;","&diams;","&aacute;","&agrave;","&acirc;","&aring;","&atilde;","&auml;","&aelig;","&ccedil;","&eacute;","&egrave;","&ecirc;","&euml;","&iacute;","&igrave;","&icirc;","&iuml;","&ntilde;","&oacute;","&ograve;","&ocirc;","&oslash;","&otilde;","&ouml;","&szlig;","&uacute;","&ugrave;","&ucirc;","&uuml;","&yuml;"],t.pick=function(e){t.onPick({symbol:e})},n.ready(function(){function e(t){1==t.nodeType&&(t.setAttribute("unselectable","on"),t.unselectable="on");for(var n=t.firstChild;n;)e(n),n=n.nextSibling}for(var t=0;t<document.getElementsByClassName("ngp-symbols-grid").length;t+=1)e(document.getElementsByClassName("ngp-symbols-grid")[t])})};return{link:t,scope:{show:"=",onPick:"&"},restrict:"AE",template:'<ul ng-show="show" class="ngp-symbols-grid"><li ng-repeat="symbol in symbols" unselectable="on" ng-click="pick(symbol)" ng-bind-html="symbol"></li></ul>'}}]),e.module("ngWYSIWYG").service("ngpImageResizer",["NGP_EVENTS",function(e){function t(e){e.preventDefault()}function n(e){e.preventDefault(),e.stopPropagation(),y.style.height="",y.style.width="",l()}function r(e){e.preventDefault(),e.stopPropagation(),y.style.width="100%",y.style.height="",l()}function i(e){return e.target!=m?(u.removeEventListener("mousemove",a),void(v=!1)):(e.stopPropagation(),e.preventDefault(),u.addEventListener("mousemove",a),void(v=!0))}function a(e){e.stopPropagation(),e.preventDefault();var t=e.pageY,n=t-(y.getBoundingClientRect().top+c.pageYOffset);y.style.height=n+"px",y.style.width="",g&&e.clientY>g&&c.innerHeight-e.clientY<=45&&c.scrollTo(0,c.innerHeight),g=e.clientY,l()}function o(e,t){return t==f||v?void u.removeEventListener("mousemove",a):"IMG"!==t.tagName?s():(f.parentNode||d.appendChild(f),y=t,void l())}function l(){var e=c.getComputedStyle(y);f.style.height=e.getPropertyValue("height"),f.style.width=e.getPropertyValue("width"),f.style.top=y.getBoundingClientRect().top+c.pageYOffset+"px",f.style.left=y.getBoundingClientRect().left+c.pageXOffset+"px",f.style.display="block"}function s(e){f.parentNode&&(e&&"IMG"===e.target.tagName||(f.style.display="none",g=null))}var u,c,d,f,g,p,m,h,v,y,b=this;b.setup=function(a,l){c=l.defaultView,u=l,d=u.querySelector("body"),p=a,f=u.createElement("div"),f.className="ngp-image-resizer",f.style.position="absolute",f.style.border="1px dashed black",f.style.display="none",f.setAttribute("contenteditable",!1),m=u.createElement("div"),m.style.position="absolute",m.style.height="10px",m.style.width="10px",m.style.bottom="-5px",m.style.right="-5px",m.style.border="1px solid black",m.style.backgroundColor="#fff",m.style.cursor="se-resize",m.setAttribute("contenteditable",!1),f.appendChild(m),h=u.createElement("div"),h.style.position="absolute",h.style.height="30px",h.style.width="150px",h.style.bottom="-30px",h.style.left="0",f.appendChild(h);var g=u.createElement("button");g.addEventListener("click",n),g.innerHTML="Auto",h.appendChild(g);var v=u.createElement("button");v.addEventListener("click",r),v.innerHTML="100%",h.appendChild(v),u.addEventListener("mousedown",i),u.addEventListener("mouseup",i),c.parent.document.addEventListener("mouseup",i),d.addEventListener("mscontrolselect",t),p.$on(e.ELEMENT_CLICKED,o),p.$on(e.CLICK_AWAY,s)}}]);var t='<div class="tinyeditor"><div class="tinyeditor-header" ng-hide="editMode">{toolbar}<div style="clear: both;"></div></div><div class="sizer" ngp-resizable><textarea data-placeholder-attr="" style="-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; resize: none; width: 100%; height: 100%;" ng-show="editMode" ng-model="content"></textarea><iframe style="-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; width: 100%; height: 100%;" ng-hide="editMode" ngp-content-frame="{sanitize: config.sanitize}" content-style="{contentStyle}" ng-model="content"></iframe></div><div class="tinyeditor-footer"><div ng-switch="editMode" ng-click="editMode = !editMode" class="toggle"><span ng-switch-when="true">wysiwyg</span><span ng-switch-default>source</span></div></div></div>';return e.module("ngWYSIWYG").directive("wysiwygEdit",["ngpUtils","NGP_EVENTS","$rootScope","$compile","$timeout","$q",function(n,r,i,a,o,l){var s=function(o,s,u,c){function d(){null==p&&(p=document.querySelector("wysiwyg-edit").querySelector("iframe"),m=p.contentDocument,h=m.defaultView)}function f(e){o.$broadcast("insertElement",e)}function g(e){var t="<"+e.type;if(t+=' class="'+e["class"],v&&(t+=" tinyeditor-control-fa"),t+='" ',"div"==e.type){if(e.title&&(t+='title="'+e.title+'" '),e.backgroundPos&&!v&&(t+='style="background-position: '+e.backgroundPos+'; position: relative;" '),e.pressed&&(t+="ng-class=\"{'pressed': cursorStyle."+e.pressed+'}" '),e.command){var n="'"+e.command+"'";e.commandParameter&&(n+=", '"+e.commandParameter+"'"),t+='ng-click="execCommand('+n+')" '}else e.specialCommand&&(t+='ng-click="'+e.specialCommand+'" ');t+=">",e.faIcon&&v&&"-"!=e.faIcon&&(t+='<i class="fa fa-'+e.faIcon+'"></i>'),e.faIcon&&v&&"-"==e.faIcon&&(t+='<div class="hr"></div>'),e.inner&&(t+=e.inner)}else"select"==e.type&&(t+='ng-model="'+e.model+'" ',t+='ng-options="'+e.options+'" ',t+='ng-change="'+e.change+'" ',t+='<option value="">'+e.title+"</option>");return t+="</"+e.type+">"}o.editMode=!1,o.cursorStyle={},document.addEventListener("click",function(){i.$broadcast(r.CLICK_AWAY)});var p=null,m=null,h=null;o.panelButtons={"-":{type:"div",class:"tinyeditor-divider"},bold:{type:"div",title:"Bold",class:"tinyeditor-control",faIcon:"bold",backgroundPos:"34px -120px",pressed:"bold",command:"bold"},italic:{type:"div",title:"Italic",class:"tinyeditor-control",faIcon:"italic",backgroundPos:"34px -150px",pressed:"italic",command:"italic"},underline:{type:"div",title:"Underline",class:"tinyeditor-control",faIcon:"underline",backgroundPos:"34px -180px",pressed:"underline",command:"underline"},strikethrough:{type:"div",title:"Strikethrough",class:"tinyeditor-control",faIcon:"strikethrough",backgroundPos:"34px -210px",pressed:"strikethrough",command:"strikethrough"},subscript:{type:"div",title:"Subscript",class:"tinyeditor-control",faIcon:"subscript",backgroundPos:"34px -240px",pressed:"sub",command:"subscript"},superscript:{type:"div",title:"Superscript",class:"tinyeditor-control",faIcon:"superscript",backgroundPos:"34px -270px",pressed:"super",command:"superscript"},leftAlign:{type:"div",title:"Left Align",class:"tinyeditor-control",faIcon:"align-left",backgroundPos:"34px -420px",pressed:"alignmet == 'left'",command:"justifyleft"},centerAlign:{type:"div",title:"Center Align",class:"tinyeditor-control",faIcon:"align-center",backgroundPos:"34px -450px",pressed:"alignment == 'center'",command:"justifycenter"},rightAlign:{type:"div",title:"Right Align",class:"tinyeditor-control",faIcon:"align-right",backgroundPos:"34px -480px",pressed:"alignment == 'right'",command:"justifyright"},blockJustify:{type:"div",title:"Block Justify",class:"tinyeditor-control",faIcon:"align-justify",backgroundPos:"34px -510px",pressed:"alignment == 'justify'",command:"justifyfull"},orderedList:{type:"div",title:"Insert Ordered List",class:"tinyeditor-control",faIcon:"list-ol",backgroundPos:"34px -300px",command:"insertorderedlist"},unorderedList:{type:"div",title:"Insert Unordered List",class:"tinyeditor-control",faIcon:"list-ul",backgroundPos:"34px -330px",command:"insertunorderedlist"},outdent:{type:"div",title:"Outdent",class:"tinyeditor-control",faIcon:"outdent",backgroundPos:"34px -360px",command:"outdent"},indent:{type:"div",title:"Indent",class:"tinyeditor-control",faIcon:"indent",backgroundPos:"34px -390px",command:"indent"},removeFormatting:{type:"div",title:"Remove Formatting",class:"tinyeditor-control",faIcon:"eraser",backgroundPos:"34px -720px",command:"removeformat"},undo:{type:"div",title:"Undo",class:"tinyeditor-control",faIcon:"undo",backgroundPos:"34px -540px",command:"undo"},redo:{type:"div",title:"Redo",class:"tinyeditor-control",faIcon:"repeat",backgroundPos:"34px -570px",command:"redo"},fontColor:{type:"div",title:"Font Color",class:"tinyeditor-control",faIcon:"font",backgroundPos:"34px -779px",specialCommand:"showFontColors = !showFontColors",inner:'<ngp-colors-grid show="showFontColors" on-pick="setFontColor(color)"><ngp-colors-grid>'},backgroundColor:{type:"div",title:"Background Color",class:"tinyeditor-control",faIcon:"paint-brush",backgroundPos:"34px -808px",specialCommand:"showBgColors = !showBgColors",inner:'<ngp-colors-grid show="showBgColors" on-pick="setBgColor(color)"><ngp-colors-grid>'},image:{type:"div",title:"Insert Image",class:"tinyeditor-control",faIcon:"picture-o",backgroundPos:"34px -600px",specialCommand:"insertImage()"},hr:{type:"div",title:"Insert Horizontal Rule",class:"tinyeditor-control",faIcon:"-",backgroundPos:"34px -630px",command:"inserthorizontalrule"},symbols:{type:"div",title:"Insert Special Symbol",class:"tinyeditor-control",faIcon:"cny",backgroundPos:"34px -838px",specialCommand:"showSpecChars = !showSpecChars",inner:'<ngp-symbols-grid show="showSpecChars" on-pick="insertSpecChar(symbol)"><ngp-symbols-grid>'},link:{type:"div",title:"Insert Hyperlink",class:"tinyeditor-control",faIcon:"link",backgroundPos:"34px -660px",specialCommand:"insertLink()"},unlink:{type:"div",title:"Remove Hyperlink",class:"tinyeditor-control",faIcon:"chain-broken",backgroundPos:"34px -690px",command:"unlink"},print:{type:"div",title:"Print",class:"tinyeditor-control",faIcon:"print",backgroundPos:"34px -750px",command:"print"},font:{type:"select",title:"Font",class:"tinyeditor-font",model:"font",options:"a as a for a in fonts",change:"fontChange()"},size:{type:"select",title:"Size",class:"tinyeditor-size",model:"fontsize",options:"a.key as a.name for a in fontsizes",change:"sizeChange()"},format:{type:"select",title:"Style",class:"tinyeditor-size",model:"textstyle",options:"s.key as s.name for s in styles",change:"styleChange()"}};var v=o.config&&o.config.fontAwesome;o.toolbar=o.config&&o.config.toolbar?o.config.toolbar:[{name:"basicStyling",items:["bold","italic","underline","strikethrough","subscript","superscript","leftAlign","centerAlign","rightAlign","blockJustify","-"]},{name:"paragraph",items:["orderedList","unorderedList","outdent","indent","-"]},{name:"doers",items:["removeFormatting","undo","redo","-"]},{name:"colors",items:["fontColor","backgroundColor","-"]},{name:"links",items:["image","hr","symbols","link","unlink","-"]},{name:"tools",items:["print","-"]},{name:"styling",items:["font","size","format"]}];var y=[];e.forEach(o.toolbar,function(t,n){var r=[];e.forEach(t.items,function(e,t){var n=o.panelButtons[e];n||(n=o.config.buttons[e]),this.push(g(n))},r),this.push('<div class="tinyeditor-buttons-group">'+r.join("")+"</div>")},y);var b=t.replace("{toolbar}",y.join(""));b=b.replace("{contentStyle}",u.contentStyle||""),s.html(b),a(s.contents())(o),o.execCommand=function(e,t){switch(e){case"bold":o.cursorStyle.bold=!o.cursorStyle.bold;break;case"italic":o.cursorStyle.italic=!o.cursorStyle.italic;break;case"underline":o.cursorStyle.underline=!o.cursorStyle.underline;break;case"strikethrough":o.cursorStyle.strikethrough=!o.cursorStyle.strikethrough;break;case"subscript":o.cursorStyle.sub=!o.cursorStyle.sub;break;case"superscript":o.cursorStyle["super"]=!o.cursorStyle["super"];break;case"justifyleft":o.cursorStyle.alignment="left";break;case"justifycenter":o.cursorStyle.alignment="center";break;case"justifyright":o.cursorStyle.alignment="right";break;case"justifyfull":o.cursorStyle.alignment="justify"}o.$broadcast("execCommand",{command:e,arg:t})},o.fonts=["Verdana","Arial","Arial Black","Arial Narrow","Courier New","Century Gothic","Comic Sans MS","Georgia","Impact","Tahoma","Times","Times New Roman","Webdings","Trebuchet MS"],o.fontChange=function(){o.execCommand("fontname",o.font)},o.fontsizes=[{key:1,name:"x-small"},{key:2,name:"small"},{key:3,name:"normal"},{key:4,name:"large"},{key:5,name:"x-large"},{key:6,name:"xx-large"},{key:7,name:"xxx-large"}],o.mapFontSize={10:1,13:2,16:3,18:4,24:5,32:6,48:7},o.sizeChange=function(){o.execCommand("fontsize",o.fontsize)},o.styles=[{name:"Paragraph",key:"<p>"},{name:"Header 1",key:"<h1>"},{name:"Header 2",key:"<h2>"},{name:"Header 3",key:"<h3>"},{name:"Header 4",key:"<h4>"},{name:"Header 5",key:"<h5>"},{name:"Header 6",key:"<h6>"}],o.styleChange=function(){o.execCommand("formatblock",o.textstyle)},o.showFontColors=!1,o.setFontColor=function(e){o.execCommand("foreColor",e)},o.showBgColors=!1,o.setBgColor=function(e){o.execCommand("hiliteColor",e)},o.showSpecChars=!1,o.insertSpecChar=function(e){f(e)},o.insertLink=function(){if(d(),null!=h.getSelection().focusNode){var t=n.getSelectionBoundaryElement(h,!0),r="http://";if(t&&"A"==t.nodeName){r=t.href;var i=m.createRange();i.setStart(t.firstChild,0),i.setEnd(t.firstChild,t.firstChild.length);var a=h.getSelection();a.removeAllRanges(),a.addRange(i)}var s;s=o.api&&o.api.insertLink&&e.isFunction(o.api.insertLink)?o.api.insertLink.apply(o.api.scope||null,[r]):prompt("Please enter the URL","http://"),l.when(s).then(function(e){o.execCommand("createlink",e)})}},o.insertImage=function(){var t;o.api&&o.api.insertImage&&e.isFunction(o.api.insertImage)?t=o.api.insertImage.apply(o.api.scope||null):(t=prompt("Please enter the picture URL","http://"),t='<img src="'+t+'">'),l.when(t).then(function(e){f(e)})},s.ready(function(){function e(t){1==t.nodeType&&(t.setAttribute("unselectable","on"),t.unselectable="on");for(var n=t.firstChild;n;)e(n),n=n.nextSibling}for(var t=0;t<document.getElementsByClassName("tinyeditor-header").length;t+=1)e(document.getElementsByClassName("tinyeditor-header")[t])}),o.$on("cursor-position",function(e,t){o.cursorStyle=t,o.font=t.font.replace(/(')/g,""),o.fontsize=o.mapFontSize[t.size]?o.mapFontSize[t.size]:0})};return{link:s,scope:{content:"=",api:"=",config:"="},restrict:"AE",replace:!0}}]),e.module("ngWYSIWYG").directive("ngpContentFrame",["ngpImageResizer","ngpUtils","NGP_EVENTS","$compile","$timeout","$sanitize",function(t,n,r,i,a,o){var l=function(i,l,s,u){var c=l[0].contentDocument;c.open(),c.write('<!DOCTYPE html><html><head></head><body contenteditable="true"></body></html>'),c.close(),c.designMode="On",t.setup(i,c);var d=e.element(l[0].contentDocument.body),f=e.element(l[0].contentDocument.head);d.attr("contenteditable","true"),c.addEventListener("click",function(e){"HTML"===e.target.tagName&&e.target.querySelector("body").focus(),i.$emit(r.ELEMENT_CLICKED,e.target)}),s.contentStyle&&f.append('<link rel="stylesheet" type="text/css" href="'+s.contentStyle+'">'),u.$render=function(){d[0].innerHTML=u.$viewValue?i.config&&i.config.sanitize?o(u.$viewValue):u.$viewValue:""},i.sync=function(){i.$evalAsync(function(e){u.$setViewValue(d.html())})};var g=null;d.bind("click keyup change paste",function(){g&&a.cancel(g),g=a(function(){var e=d[0].ownerDocument,t=e.querySelector(".ngp-image-resizer"),r=d[0].innerHTML;t&&(r=r.replace(t.outerHTML,"")),u.$setViewValue(r);var a=n.getSelectionBoundaryElement(l[0].contentWindow,!0);if(a){var o=l[0].contentWindow.getComputedStyle(a),s={bold:"bold"==o.getPropertyValue("font-weight")||parseInt(o.getPropertyValue("font-weight"))>=700,italic:"italic"==o.getPropertyValue("font-style"),underline:"underline"==o.getPropertyValue("text-decoration"),strikethrough:"line-through"==o.getPropertyValue("text-decoration"),font:o.getPropertyValue("font-family"),size:parseInt(o.getPropertyValue("font-size")),color:o.getPropertyValue("color"),sub:"sub"==o.getPropertyValue("vertical-align"),super:"super"==o.getPropertyValue("vertical-align"),background:o.getPropertyValue("background-color"),alignment:o.getPropertyValue("text-align")};i.$emit("cursor-position",s)}},100,!0)}),i.range=null,i.getSelection=function(){if(c.getSelection){var e=c.getSelection();e.getRangeAt&&e.rangeCount&&(i.range=e.getRangeAt(0))}},i.restoreSelection=function(){if(i.range&&c.getSelection){var e=c.getSelection();e.removeAllRanges(),e.addRange(i.range)}},i.$on("execCommand",function(e,t){console.log("execCommand: "),console.log(t),l[0].contentDocument.body.focus();var n=c.selection;if(n){var r=n.createRange();c.execCommand(t.command,0,t.arg),r.collapse(!1),r.select()}else c.execCommand(t.command,0,t.arg);c.body.focus(),i.sync()}),i.$on("insertElement",function(e,t){var n,r;if(c.defaultView.getSelection){if(n=c.defaultView.getSelection(),n.getRangeAt&&n.rangeCount){r=n.getRangeAt(0),r.deleteContents();var a=c.createElement("div");a.innerHTML=t;for(var o,l,s=c.createDocumentFragment();o=a.firstChild;)l=s.appendChild(o);s.firstChild;r.insertNode(s),l&&(r=r.cloneRange(),r.setStartAfter(l),r.collapse(!0),n.removeAllRanges(),n.addRange(r))}}else c.selection&&"Control"!=c.selection.type&&c.selection.createRange().pasteHTML(t);i.sync()}),i.$on("$destroy",function(){});try{c.execCommand("styleWithCSS",0,0),c.execCommand("enableObjectResizing",!1,"false"),c.execCommand("contentReadOnly",0,"false")}catch(e){try{c.execCommand("useCSS",0,1)}catch(e){}}};return{link:l,require:"ngModel",scope:{config:"=ngpContentFrame"},replace:!0,restrict:"AE"}}]),e.module("ngWYSIWYG").directive("ngpResizable",["$document",function(e){return function(t,n){var r=e[0],i=n[0],a=r.createElement("span");a.className="resizer",i.appendChild(a),a.addEventListener("mousedown",function(){function e(e){e.preventDefault();var t=e.pageY;e.view!=r.defaultView&&(t=e.pageY+e.view.frameElement.getBoundingClientRect().top+r.defaultView.pageYOffset);var n=t-(i.getBoundingClientRect().top+r.defaultView.pageYOffset),a=i.style.height.replace("px","");a&&n>a&&window.innerHeight-e.clientY<=45&&r.defaultView.scrollBy(0,n-a),i.style.height=n+"px"}function t(){r.removeEventListener("mousemove",e),r.removeEventListener("mouseup",t);for(var n=r.querySelectorAll("iframe"),i=0;i<n.length;i++)n[i].contentWindow.document.removeEventListener("mouseup",t),n[i].contentWindow.document.removeEventListener("mousemove",e)}r.addEventListener("mousemove",e),r.addEventListener("mouseup",t);for(var n=r.querySelectorAll("iframe"),a=0;a<n.length;a++)n[a].contentWindow.document.addEventListener("mouseup",t),n[a].contentWindow.document.addEventListener("mousemove",e)})}}]),e.module("ngWYSIWYG").service("ngpUtils",[function(){var e=this;e.getSelectionBoundaryElement=function(e,t){var n,r,i=null,a=e.document;return a.selection?(n=a.selection.createRange(),n.collapse(t),n.parentElement()):(a.getSelection?(r=a.getSelection(),r.rangeCount>0&&(n=r.getRangeAt(0),i=n[t?"startContainer":"endContainer"],3===i.nodeType&&(i=i.parentNode))):e.getSelection&&(r=e.getSelection(),r.rangeCount>0&&(n=r.getRangeAt(0),i=n[t?"startContainer":"endContainer"],3===i.nodeType&&(i=i.parentNode))),i)}}]),"ngWYSIWYG"});!function(e,t){"undefined"!=typeof module&&module.exports?(t("undefined"==typeof angular?require("angular"):angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(this,function(e){"use strict";var t=e.module("ngDialog",[]),n=e.element,r=e.isDefined,i=(document.body||document.documentElement).style,a=r(i.animation)||r(i.WebkitAnimation)||r(i.MozAnimation)||r(i.MsAnimation)||r(i.OAnimation),o="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",l="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",s="ngdialog-disabled-animation",u={html:!1,body:!1},c={},d=[],f=[],g=!1,p=!1,m=[],h="legacy",v="1.0.0+";return t.provider("ngDialog",function(){var t=this.defaults={className:"ngdialog-theme-default",appendClassName:"",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,onOpenCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null,bodyClassName:"ngdialog-open",width:null,height:null};this.setForceHtmlReload=function(e){u.html=e||!1},this.setForceBodyReload=function(e){u.body=e||!1},this.setDefaults=function(n){e.extend(t,n)},this.setOpenOnePerName=function(e){p=e||!1};var r,i=0,y=0,b={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function($,C,w,D,x,k,S,A,E,F){var P=[],z={onDocumentKeydown:function(e){27===e.keyCode&&O.close("$escape")},activate:function(e){var t=e.data("$ngDialogOptions");t.trapFocus&&(e.on("keydown",z.onTrapFocusKeydown),P.body.on("keydown",z.onTrapFocusKeydown))},deactivate:function(e){e.off("keydown",z.onTrapFocusKeydown),P.body.off("keydown",z.onTrapFocusKeydown)},deactivateAll:function(t){e.forEach(t,function(t){var n=e.element(t);z.deactivate(n)})},setBodyPadding:function(e){var t=parseInt(P.body.css("padding-right")||0,10);P.body.css("padding-right",t+e+"px"),P.body.data("ng-dialog-original-padding",t),k.$broadcast("ngDialog.setPadding",e)},resetBodyPadding:function(){var e=P.body.data("ng-dialog-original-padding");e?P.body.css("padding-right",e+"px"):P.body.css("padding-right",""),k.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(e,t){var n=e.data("$ngDialogOptions"),i=e.attr("id"),l=c[i];if(z.deactivate(e),l){if("undefined"!=typeof A.Hammer){var s=l.hammerTime;s.off("tap",r),s.destroy&&s.destroy(),delete l.hammerTime}else e.unbind("click");1===y&&P.body.unbind("keydown",z.onDocumentKeydown),e.hasClass("ngdialog-closing")||(y-=1);var u=e.data("$ngDialogPreviousFocus");u&&u.focus&&u.focus(),k.$broadcast("ngDialog.closing",e,t),y=y<0?0:y,a&&!n.disableAnimation?(l.$destroy(),e.unbind(o).bind(o,function(){z.closeDialogElement(e,t)}).addClass("ngdialog-closing")):(l.$destroy(),z.closeDialogElement(e,t)),b[i]&&(b[i].resolve({id:i,value:t,$dialog:e,remainingDialogs:y}),delete b[i]),c[i]&&delete c[i],d.splice(d.indexOf(i),1),d.length||(P.body.unbind("keydown",z.onDocumentKeydown),g=!1),0==y&&(r=void 0)}},closeDialogElement:function(e,t){var n=e.data("$ngDialogOptions");e.remove(),f.splice(f.indexOf(n.bodyClassName),1),f.indexOf(n.bodyClassName)===-1&&(P.html.removeClass(n.bodyClassName),P.body.removeClass(n.bodyClassName)),0===y&&z.resetBodyPadding(),k.$broadcast("ngDialog.closed",e,t)},closeDialog:function(t,n){var r=t.data("$ngDialogPreCloseCallback");if(r&&e.isFunction(r)){var i=r.call(t,n);if(e.isObject(i))i.closePromise?i.closePromise.then(function(){z.performCloseDialog(t,n)},function(){return!1}):i.then(function(){z.performCloseDialog(t,n)},function(){return!1});else{if(i===!1)return!1;z.performCloseDialog(t,n)}}else z.performCloseDialog(t,n)},onTrapFocusKeydown:function(t){var n,r=e.element(t.currentTarget);if(r.hasClass("ngdialog"))n=r;else if(n=z.getActiveDialog(),null===n)return;var i=9===t.keyCode,a=t.shiftKey===!0;i&&z.handleTab(n,t,a)},handleTab:function(e,t,n){var r=z.getFocusableElements(e);if(0===r.length)return void(document.activeElement&&document.activeElement.blur&&document.activeElement.blur());var i=document.activeElement,a=Array.prototype.indexOf.call(r,i),o=a===-1,l=0===a,s=a===r.length-1,u=!1;n?(o||l)&&(r[r.length-1].focus(),u=!0):(o||s)&&(r[0].focus(),u=!0),u&&(t.preventDefault(),t.stopPropagation())},autoFocus:function(e){var t=e[0],r=t.querySelector("*[autofocus]");if(null===r||(r.focus(),document.activeElement!==r)){var i=z.getFocusableElements(e);if(i.length>0)return void i[0].focus();var a=z.filterVisibleElements(t.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(a.length>0){var o=a[0];n(o).attr("tabindex","-1").css("outline","0"),o.focus()}}},getFocusableElements:function(e){var t=e[0],n=t.querySelectorAll(l),r=z.filterTabbableElements(n);return z.filterVisibleElements(r)},filterTabbableElements:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"-1"!==n(i).attr("tabindex")&&t.push(i)}return t},filterVisibleElements:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];(r.offsetWidth>0||r.offsetHeight>0)&&t.push(r)}return t},getActiveDialog:function(){var e=document.querySelectorAll(".ngdialog");return 0===e.length?null:n(e[e.length-1])},applyAriaAttributes:function(e,t){if(t.ariaAuto){if(!t.ariaRole){var n=z.getFocusableElements(e).length>0?"dialog":"alertdialog";t.ariaRole=n}t.ariaLabelledBySelector||(t.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),t.ariaDescribedBySelector||(t.ariaDescribedBySelector="article,section,p")}t.ariaRole&&e.attr("role",t.ariaRole),z.applyAriaAttribute(e,"aria-labelledby",t.ariaLabelledById,t.ariaLabelledBySelector),z.applyAriaAttribute(e,"aria-describedby",t.ariaDescribedById,t.ariaDescribedBySelector)},applyAriaAttribute:function(e,t,r,i){if(r)return void e.attr(t,r);if(i){var a=e.attr("id"),o=e[0].querySelector(i);if(!o)return;var l=a+"-"+t;return n(o).attr("id",l),e.attr(t,l),l}},detectUIRouter:function(){return F.has("$transitions")?v:!!F.has("$state")&&h},getRouterLocationEventName:function(){return z.detectUIRouter()?"$stateChangeStart":"$locationChangeStart"}},O={__PRIVATE__:z,open:function(a){function o(t,n){var n=n||{};return n.headers=n.headers||{},e.extend(n.headers,{Accept:"text/html"}),k.$broadcast("ngDialog.templateLoading",t),x.get(t,n).then(function(e){return k.$broadcast("ngDialog.templateLoaded",t),e.data||""})}function l(t){return t?e.isString(t)&&h.plain?t:"boolean"!=typeof h.cache||h.cache?o(t,{cache:C}):o(t,{cache:!1}):"Empty template"}var u=null;if(a=a||{},!(p&&a.name&&(u=a.name.toLowerCase().replace(/\s/g,"-")+"-dialog",this.isOpen(u)))){var h=e.copy(t),v=++i;u=u||"ngdialog"+v,d.push(u),"undefined"!=typeof h.data&&("undefined"==typeof a.data&&(a.data={}),a.data=e.merge(e.copy(h.data),a.data)),e.extend(h,a);var $;b[u]=$=D.defer();var U;c[u]=U=e.isObject(h.scope)?h.scope.$new():k.$new();var T,R,I,_=e.extend({},h.resolve);return e.forEach(_,function(t,n){_[n]=e.isString(t)?F.get(t):F.invoke(t,null,null,n)}),D.all({template:l(h.template||h.templateUrl),locals:D.all(_)}).then(function(t){var i=t.template,a=t.locals;h.showClose&&(i+='<button aria-label="Dismiss" class="ngdialog-close"></button>');var o=h.overlay?"":" ngdialog-no-overlay";if(T=n('<div id="'+u+'" class="ngdialog'+o+'"></div>'),T.html(h.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+i+"</div>":'<div class="ngdialog-content" role="document">'+i+"</div>"),T.data("$ngDialogOptions",h),U.ngDialogId=u,h.data&&e.isString(h.data)){var l=h.data.replace(/^\s*/,"")[0];U.ngDialogData="{"===l||"["===l?e.fromJson(h.data):new String(h.data),U.ngDialogData.ngDialogId=u}else h.data&&e.isObject(h.data)&&(U.ngDialogData=h.data,U.ngDialogData.ngDialogId=u);if(h.className&&T.addClass(h.className),h.appendClassName&&T.addClass(h.appendClassName),h.width&&(I=T[0].querySelector(".ngdialog-content"),e.isString(h.width)?I.style.width=h.width:I.style.width=h.width+"px"),h.height&&(I=T[0].querySelector(".ngdialog-content"),e.isString(h.height)?I.style.height=h.height:I.style.height=h.height+"px"),h.disableAnimation&&T.addClass(s),R=h.appendTo&&e.isString(h.appendTo)?e.element(document.querySelector(h.appendTo)):P.body,z.applyAriaAttributes(T,h),[{name:"$ngDialogPreCloseCallback",value:h.preCloseCallback},{name:"$ngDialogOnOpenCallback",value:h.onOpenCallback}].forEach(function(t){if(t.value){var n;e.isFunction(t.value)?n=t.value:e.isString(t.value)&&U&&(e.isFunction(U[t.value])?n=U[t.value]:U.$parent&&e.isFunction(U.$parent[t.value])?n=U.$parent[t.value]:k&&e.isFunction(k[t.value])&&(n=k[t.value])),n&&T.data(t.name,n)}}),U.closeThisDialog=function(e){z.closeDialog(T,e)},h.controller&&(e.isString(h.controller)||e.isArray(h.controller)||e.isFunction(h.controller))){var c;h.controllerAs&&e.isString(h.controllerAs)&&(c=h.controllerAs);var d=E(h.controller,e.extend(a,{$scope:U,$element:T}),!0,c);h.bindToController&&e.extend(d.instance,{ngDialogId:U.ngDialogId,ngDialogData:U.ngDialogData,closeThisDialog:U.closeThisDialog,confirm:U.confirm}),"function"==typeof d?T.data("$ngDialogControllerController",d()):T.data("$ngDialogControllerController",d)}if(S(function(){var t=document.querySelectorAll(".ngdialog");z.deactivateAll(t),w(T)(U);var n=A.innerWidth-P.body.prop("clientWidth");P.html.addClass(h.bodyClassName),P.body.addClass(h.bodyClassName),f.push(h.bodyClassName);var r=n-(A.innerWidth-P.body.prop("clientWidth"));r>0&&z.setBodyPadding(r),R.append(T),z.activate(T),h.trapFocus&&z.autoFocus(T),h.name?k.$broadcast("ngDialog.opened",{dialog:T,name:h.name}):k.$broadcast("ngDialog.opened",T);var i=T.data("$ngDialogOnOpenCallback");i&&e.isFunction(i)&&i.call(T)}),g||(P.body.bind("keydown",z.onDocumentKeydown),g=!0),h.closeByNavigation&&m.push(T),h.preserveFocus&&T.data("$ngDialogPreviousFocus",document.activeElement),r=function(e){var t=!!h.closeByDocument&&n(e.target).hasClass("ngdialog-overlay"),r=n(e.target).hasClass("ngdialog-close");(t||r)&&O.close(T.attr("id"),r?"$closeButton":"$document")},"undefined"!=typeof A.Hammer){var p=U.hammerTime=A.Hammer(T[0]);p.on("tap",r)}else T.bind("click",r);return y+=1,O}),{id:u,closePromise:$.promise,close:function(e){z.closeDialog(T,e)}}}},openConfirm:function(r){var i=D.defer(),a=e.copy(t);r=r||{},"undefined"!=typeof a.data&&("undefined"==typeof r.data&&(r.data={}),r.data=e.merge(e.copy(a.data),r.data)),e.extend(a,r),a.scope=e.isObject(a.scope)?a.scope.$new():k.$new(),a.scope.confirm=function(e){i.resolve(e);var t=n(document.getElementById(o.id));z.performCloseDialog(t,e)};var o=O.open(a);if(o)return o.closePromise.then(function(e){return e?i.reject(e.value):i.reject()}),i.promise},isOpen:function(e){var t=n(document.getElementById(e));return t.length>0},close:function(e,t){var r=n(document.getElementById(e));if(r.length)z.closeDialog(r,t);else if("$escape"===e){var i=d[d.length-1];r=n(document.getElementById(i)),r.data("$ngDialogOptions").closeByEscape&&z.closeDialog(r,"$escape")}else O.closeAll(t);return O},closeAll:function(e){for(var t=document.querySelectorAll(".ngdialog"),r=t.length-1;r>=0;r--){var i=t[r];z.closeDialog(n(i),e)}},getOpenDialogs:function(){return d},getDefaults:function(){return t}};e.forEach(["html","body"],function(e){if(P[e]=$.find(e),u[e]){var t=z.getRouterLocationEventName();k.$on(t,function(){P[e]=$.find(e)})}});var U=z.detectUIRouter();if(U===v){var T=F.get("$transitions");T.onStart({},function(e){for(;m.length>0;){var t=m.pop();if(z.closeDialog(t)===!1)return!1}})}else{var R=U===h?"$stateChangeStart":"$locationChangeStart";k.$on(R,function(e){for(;m.length>0;){var t=m.pop();z.closeDialog(t)===!1&&e.preventDefault()}})}return O}]}),t.directive("ngDialog",["ngDialog",function(t){return{restrict:"A",scope:{ngDialogScope:"="},link:function(n,r,i){r.on("click",function(r){r.preventDefault();var a=e.isDefined(n.ngDialogScope)?n.ngDialogScope:"noScope";e.isDefined(i.ngDialogClosePrevious)&&t.close(i.ngDialogClosePrevious);var o=t.getDefaults();t.open({template:i.ngDialog,className:i.ngDialogClass||o.className,appendClassName:i.ngDialogAppendClass,controller:i.ngDialogController,controllerAs:i.ngDialogControllerAs,bindToController:i.ngDialogBindToController,disableAnimation:i.ngDialogDisableAnimation,scope:a,data:i.ngDialogData,showClose:"false"!==i.ngDialogShowClose&&("true"===i.ngDialogShowClose||o.showClose),closeByDocument:"false"!==i.ngDialogCloseByDocument&&("true"===i.ngDialogCloseByDocument||o.closeByDocument),closeByEscape:"false"!==i.ngDialogCloseByEscape&&("true"===i.ngDialogCloseByEscape||o.closeByEscape),overlay:"false"!==i.ngDialogOverlay&&("true"===i.ngDialogOverlay||o.overlay),preCloseCallback:i.ngDialogPreCloseCallback||o.preCloseCallback,onOpenCallback:i.ngDialogOnOpenCallback||o.onOpenCallback,bodyClassName:i.ngDialogBodyClass||o.bodyClassName})})}}}]),t});